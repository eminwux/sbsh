{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"sbsh: Terminal-as-Code","text":"<p>sbsh brings Terminal-as-Code to your workflow: define terminal environments declaratively with YAML manifests that can be version-controlled, shared, and reused across your team. Each profile specifies environment variables, lifecycle hooks, startup commands, and visual prompts, ensuring consistent setups across local machines, jump hosts, and CI/CD pipelines.</p> <p>Demo - Launch a Terraform production workspace: profile automatically configures environment, workspace, and shows red warning prompt</p> <p></p>"},{"location":"#why-sbsh","title":"Why sbsh","text":"<p>Terminal-as-Code brings the discipline of Infrastructure-as-Code to interactive environments:</p> <ul> <li>Reproducible setups: Profiles ensure identical environments across team members and CI/CD</li> <li>Durable terminals: Survive crashes and network interruptions</li> <li>Team collaboration: Share terminals with teammates for pair programming and collaborative debugging</li> <li>Environment safety: Color-coded prompts and standardized configurations prevent mistakes</li> <li>Automation ready: Programmatic API and structured logs enable integration with existing tooling</li> </ul>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#declarative-profiles","title":"Declarative Profiles","text":"<p>Define terminal environments as YAML manifests that can be version-controlled and shared:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: terraform-prd\nspec:\n  shell:\n    env:\n      TF_VAR_environment: \"prd\"\n    prompt: '\"\\[\\e[1;31m\\]sbsh(terraform-prd) \\[\\e[1;32m\\]\\u@\\h\\[\\e[0m\\]:\\w\\$ \"'\n  stages:\n    onInit:\n      - script: terraform workspace use prd\n      - script: terraform init\n</code></pre>"},{"location":"#persistent-terminals","title":"Persistent Terminals","text":"<p>Terminals survive network drops, supervisor restarts, and accidental disconnects. Reattach anytime with <code>sb attach &lt;name&gt;</code>.</p>"},{"location":"#multi-attach-support","title":"Multi-Attach Support","text":"<p>Multiple people can attach to the same terminal for pair programming and collaborative debugging. Built-in discovery makes terminals shareable across your team.</p>"},{"location":"#clean-architecture","title":"Clean Architecture","text":"<p>sbsh separates the terminal (your work environment) from the supervisor (the controller), making terminals as durable and manageable as background services. Terminals run independently and survive supervisor crashes.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Get sbsh up and running in minutes:</p> <pre><code># Install sbsh\ncurl -L -o sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64 &amp;&amp; \\\nchmod +x sbsh &amp;&amp; \\\nsudo install -m 0755 sbsh /usr/local/bin/sbsh &amp;&amp; \\\nsudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n\n# Start your first terminal\nsbsh\n</code></pre> <p>See the Getting Started guide for detailed installation and setup instructions.</p>"},{"location":"#philosophy","title":"Philosophy","text":"<p>sbsh follows the traditional Unix philosophy: build simple tools that do one thing well and compose naturally with others. It treats supervision not as orchestration or complexity, but as clarity, giving interactive work the same discipline that background services have enjoyed for decades.</p> <p>sbsh applies the same principles of Infrastructure-as-Code to interactive environments, turning terminals into reproducible, declarative, and shareable units of work.</p>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li>Getting Started - Install and configure sbsh</li> <li>Concepts - Understand terminals, profiles, and supervisors</li> <li>Guides - Comprehensive guides for profiles, CI/CD, and containers</li> <li>CLI Reference - Complete command documentation</li> <li>Tutorials - Step-by-step tutorials</li> </ul>"},{"location":"#status","title":"Status","text":"<p>sbsh is under active development, with a focus on correctness, portability, and clear abstractions before adding integrations.</p>"},{"location":"#license","title":"License","text":"<p>Apache License 2.0</p> <p>\u00a9 2025 Emiliano Spinella (eminwux)</p>"},{"location":"faq/","title":"Frequently Asked Questions","text":"<p>Common questions about sbsh and how to use it.</p>"},{"location":"faq/#general","title":"General","text":""},{"location":"faq/#what-is-sbsh","title":"What is sbsh?","text":"<p>sbsh is a Terminal-as-Code system that provides persistent, replayable, and shareable terminal sessions. It allows you to define terminal environments declaratively using YAML profiles, ensuring consistent setups across team members and CI/CD pipelines.</p>"},{"location":"faq/#how-is-sbsh-different-from-screen-or-tmux","title":"How is sbsh different from screen or tmux?","text":"<p>sbsh treats terminals as independent, managed services with declarative configuration, built-in discovery, and programmatic control. Unlike screen and tmux, sbsh has no central server process\u2014each terminal runs autonomously. See the Comparison Guide for detailed differences.</p>"},{"location":"faq/#is-sbsh-production-ready","title":"Is sbsh production-ready?","text":"<p>sbsh is currently in beta. It's under active development with a focus on correctness, portability, and clear abstractions.</p>"},{"location":"faq/#installation","title":"Installation","text":""},{"location":"faq/#what-platforms-does-sbsh-support","title":"What platforms does sbsh support?","text":"<p>sbsh supports Linux, macOS, and FreeBSD. Both amd64 and arm64 architectures are supported. See the Installation section for platform-specific instructions.</p>"},{"location":"faq/#how-do-i-install-sbsh-on-windows","title":"How do I install sbsh on Windows?","text":"<p>Windows support is planned but not yet available. You can use sbsh in WSL (Windows Subsystem for Linux) or Docker containers. See the Container Usage Guide for details.</p>"},{"location":"faq/#usage","title":"Usage","text":""},{"location":"faq/#how-do-i-detach-from-a-terminal","title":"How do I detach from a terminal?","text":"<p>Press <code>Ctrl-]</code> twice, or run <code>sb detach</code> from within the terminal. The terminal will continue running in the background.</p>"},{"location":"faq/#can-multiple-people-attach-to-the-same-terminal","title":"Can multiple people attach to the same terminal?","text":"<p>Yes! sbsh supports multi-attach by default. Multiple supervisors can connect to the same terminal concurrently. See Multi-Attach for details.</p>"},{"location":"faq/#how-do-i-find-terminals-after-disconnecting","title":"How do I find terminals after disconnecting?","text":"<p>Use <code>sb get terminals</code> to list all active terminals. You can attach by name or ID: <code>sb attach &lt;name&gt;</code> or <code>sb attach &lt;id&gt;</code>.</p>"},{"location":"faq/#what-happens-if-the-supervisor-crashes","title":"What happens if the supervisor crashes?","text":"<p>Terminals are independent processes and continue running even if the supervisor exits. You can reattach with <code>sb attach &lt;name&gt;</code>.</p>"},{"location":"faq/#profiles","title":"Profiles","text":""},{"location":"faq/#where-are-profiles-stored","title":"Where are profiles stored?","text":"<p>Profiles are stored in <code>~/.sbsh/profiles.yaml</code> by default. You can specify a different location using the <code>SBSH_PROFILES_FILE</code> environment variable or <code>--profiles-file</code> flag.</p>"},{"location":"faq/#can-i-use-multiple-profile-files","title":"Can I use multiple profile files?","text":"<p>Currently, sbsh supports a single <code>profiles.yaml</code> file. Multiple profiles are defined in the same file, separated by <code>---</code> (YAML document separator). See the Profiles Guide for details.</p>"},{"location":"faq/#how-do-i-create-a-profile","title":"How do I create a profile?","text":"<p>See the Create Your First Profile tutorial for step-by-step instructions.</p>"},{"location":"faq/#troubleshooting","title":"Troubleshooting","text":""},{"location":"faq/#profile-not-found","title":"Profile not found","text":"<ul> <li>Check the profile name matches exactly (case-sensitive)</li> <li>Verify <code>~/.sbsh/profiles.yaml</code> exists</li> <li>Run <code>sb get profiles</code> to see available profiles</li> <li>Check if you're using a custom profiles file path</li> </ul>"},{"location":"faq/#terminal-not-starting","title":"Terminal not starting","text":"<ul> <li>Check working directory exists: <code>cwd</code> must be valid</li> <li>Verify commands in <code>onInit</code> are available in the environment</li> <li>Check file permissions and paths</li> <li>Review terminal logs in <code>~/.sbsh/run/terminals/&lt;name&gt;/</code></li> </ul>"},{"location":"faq/#environment-variables-not-working","title":"Environment variables not working","text":"<ul> <li>If <code>inheritEnv: false</code>, make sure variables are in the <code>env</code> map</li> <li>Use <code>$HOME</code> instead of <code>~</code> in env values</li> <li>Quote variable values that contain spaces or special characters</li> <li>Numbers must be strings: <code>\"5000\"</code> not <code>5000</code></li> </ul>"},{"location":"faq/#see-also","title":"See Also","text":"<ul> <li>Getting Started - Installation and basic usage</li> <li>Concepts - Understanding sbsh architecture</li> <li>Profiles Guide - Creating and managing profiles</li> <li>CLI Reference - Complete command documentation</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Get sbsh up and running in minutes. This guide covers installation, basic configuration, and your first terminal session.</p>"},{"location":"getting-started/#installation","title":"Installation","text":"<p>sbsh is available for Linux, macOS, and FreeBSD. See the Installation section for platform-specific instructions.</p>"},{"location":"getting-started/#quick-install","title":"Quick Install","text":"<pre><code># Set your platform (defaults shown)\nexport OS=linux        # Options: linux, darwin, freebsd\nexport ARCH=amd64      # Options: amd64, arm64\n\n# Install sbsh\ncurl -L -o sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-${OS}-${ARCH} &amp;&amp; \\\nchmod +x sbsh &amp;&amp; \\\nsudo install -m 0755 sbsh /usr/local/bin/sbsh &amp;&amp; \\\nsudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n</code></pre>"},{"location":"getting-started/#autocomplete-setup","title":"Autocomplete Setup","text":"<p>Enable command completion for bash:</p> <pre><code>cat &gt;&gt; ~/.bashrc &lt;&lt;EOF\nsource &lt;(sbsh autocomplete bash)\nsource &lt;(sb autocomplete bash)\nEOF\n</code></pre> <p>For zsh, add to <code>~/.zshrc</code>:</p> <pre><code>cat &gt;&gt; ~/.zshrc &lt;&lt;EOF\nsource &lt;(sbsh autocomplete zsh)\nsource &lt;(sb autocomplete zsh)\nEOF\n</code></pre>"},{"location":"getting-started/#your-first-terminal","title":"Your First Terminal","text":"<p>Start a terminal with the default profile:</p> <pre><code>$ sbsh\nTo detach, press ^] twice\n[sbsh-35af93de] user@host:~/projects$\n</code></pre> <p>You're now in an sbsh terminal! The terminal ID (<code>35af93de</code>) is shown in the prompt.</p>"},{"location":"getting-started/#detach-from-terminal","title":"Detach from Terminal","text":"<p>Press <code>Ctrl-]</code> twice to detach. The terminal keeps running:</p> <pre><code>[sbsh-35af93de] user@host:~/projects$ # Press Ctrl-] twice\nDetached\n$  # Back to your shell, but terminal is still running\n</code></pre>"},{"location":"getting-started/#list-active-terminals","title":"List Active Terminals","text":"<pre><code>$ sb get terminals\nID        NAME           PROFILE  CMD                           STATUS\nbbb4b457  quick_samwise  default  /bin/bash --norc --noprofile  Ready\n</code></pre>"},{"location":"getting-started/#reattach-to-a-terminal","title":"Reattach to a Terminal","text":"<pre><code>$ sb attach quick_samwise\n[sbsh-bbb4b457] user@host:~/projects$ # Back where you left off!\n</code></pre>"},{"location":"getting-started/#using-profiles","title":"Using Profiles","text":"<p>Profiles define terminal environments declaratively. Start a terminal with a profile:</p> <pre><code>$ sbsh -p k8s-default\n# Automatically configures kubectl context, shows cluster status\n</code></pre> <p>List available profiles:</p> <pre><code>$ sb get profiles\nNAME              TARGET  ENVVARS  CMD\nk8s-default       local   4 vars   /bin/bash\nterraform-prd     local   2 vars   /bin/bash\ndocker-container  local   0 vars   /usr/bin/docker run ...\n</code></pre> <p>See the Profiles Guide for creating your own profiles.</p>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Concepts - Learn about terminals, profiles, and supervisors</li> <li>Create Your First Profile - Build a custom profile</li> <li>CLI Reference - Explore all available commands</li> <li>FAQ - Common questions and answers</li> </ul>"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>sbsh is built on a clean architecture that separates terminals (work environments) from supervisors (controllers), making terminals as durable and manageable as background services.</p>"},{"location":"architecture/overview/#core-principles","title":"Core Principles","text":""},{"location":"architecture/overview/#process-independence","title":"Process Independence","text":"<p>Terminals run as independent processes with their own process groups. This means:</p> <ul> <li>Terminals survive supervisor crashes</li> <li>No central server or daemon process</li> <li>Each terminal is isolated from others</li> <li>Failures are contained to individual terminals</li> </ul>"},{"location":"architecture/overview/#separation-of-concerns","title":"Separation of Concerns","text":"<pre><code>Terminal (Environment)  \u2190\u2192  Supervisor (Controller)\n     \u2193                           \u2193\n  Process                   Management\n  I/O Capture              Attachment/Detachment\n  State                    Lifecycle Coordination\n</code></pre> <ul> <li>Terminal: The actual shell environment that runs your commands</li> <li>Supervisor: The lightweight process that manages and attaches to terminals</li> </ul>"},{"location":"architecture/overview/#architecture-diagram","title":"Architecture Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Supervisor \u2502  Manages and attaches to terminals\n\u2502  (sbsh/sb)  \u2502  Handles I/O forwarding\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  Lightweight, can exit without affecting terminals\n       \u2502\n       \u2502 Unix Domain Socket\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Terminal  \u2502  Independent process\n\u2502  (Process)  \u2502  Runs shell/command\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  Survives supervisor exit\n</code></pre>"},{"location":"architecture/overview/#key-components","title":"Key Components","text":""},{"location":"architecture/overview/#terminals","title":"Terminals","text":"<ul> <li>Independent processes running shell/commands</li> <li>Store metadata in <code>~/.sbsh/run/terminals/&lt;id&gt;/</code></li> <li>Communicate via Unix domain sockets</li> <li>Continue running even if supervisors exit</li> </ul>"},{"location":"architecture/overview/#supervisors","title":"Supervisors","text":"<ul> <li>Lightweight management processes</li> <li>Handle attachment/detachment</li> <li>Forward I/O between user and terminal</li> <li>Can attach to existing terminals</li> </ul>"},{"location":"architecture/overview/#profiles","title":"Profiles","text":"<ul> <li>Declarative YAML configuration</li> <li>Define terminal environments</li> <li>Version-controlled and shareable</li> <li>Specify lifecycle hooks and environment</li> </ul>"},{"location":"architecture/overview/#metadata-directory","title":"Metadata Directory","text":"<ul> <li><code>~/.sbsh/run/terminals/</code>: Terminal state and logs</li> <li><code>~/.sbsh/run/supervisors/</code>: Supervisor state</li> <li>Enables discovery and reattachment</li> <li>Persists across restarts</li> </ul>"},{"location":"architecture/overview/#communication-model","title":"Communication Model","text":""},{"location":"architecture/overview/#unix-domain-sockets","title":"Unix Domain Sockets","text":"<p>Terminals and supervisors communicate via Unix domain sockets:</p> <ul> <li>Located in <code>~/.sbsh/run/terminals/&lt;id&gt;/socket</code></li> <li>Enables local inter-process communication</li> <li>No network overhead</li> <li>File-based discovery</li> </ul>"},{"location":"architecture/overview/#rpc-protocol","title":"RPC Protocol","text":"<p>Supervisors use JSON-RPC to communicate with terminals:</p> <ul> <li>Structured request/response</li> <li>State queries</li> <li>I/O forwarding</li> <li>Lifecycle management</li> </ul>"},{"location":"architecture/overview/#failure-model","title":"Failure Model","text":""},{"location":"architecture/overview/#terminal-independence","title":"Terminal Independence","text":"<p>Terminals are designed to survive:</p> <ul> <li>Supervisor crashes</li> <li>Network disconnections</li> <li>Accidental disconnects</li> <li>System restarts (with proper volume mounting)</li> </ul>"},{"location":"architecture/overview/#no-single-point-of-failure","title":"No Single Point of Failure","text":"<ul> <li>No central server process</li> <li>Each terminal is independent</li> <li>Supervisor failures don't cascade</li> <li>Metadata persists on disk</li> </ul>"},{"location":"architecture/overview/#discovery","title":"Discovery","text":"<p>Terminals are discoverable via metadata directory:</p> <ul> <li>Structured metadata in JSON</li> <li>Query by name or ID</li> <li>Works across machines with shared filesystem</li> <li>No manual socket management</li> </ul>"},{"location":"architecture/overview/#related-documentation","title":"Related Documentation","text":"<ul> <li>Process Model - Detailed process architecture</li> <li>Terminals - Terminal lifecycle</li> <li>Supervisor - Supervisor architecture</li> <li>Comparison Guide - Comparison with screen/tmux</li> </ul>"},{"location":"architecture/process-model/","title":"Process Model","text":"<p>sbsh's process model ensures terminals are independent, isolated, and durable. Unlike traditional terminal multiplexers, sbsh has no central server process.</p>"},{"location":"architecture/process-model/#no-server-architecture","title":"No-Server Architecture","text":""},{"location":"architecture/process-model/#traditional-multiplexers-screentmux","title":"Traditional Multiplexers (screen/tmux)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Server Process \u2502  Single process manages all sessions\n\u2502  (screen/tmux) \u2502  Sessions are children of server\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  Server crash affects all sessions\n         \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u25bc         \u25bc         \u25bc\n Session  Session  Session\n</code></pre> <p>Problems:</p> <ul> <li>Single point of failure</li> <li>Shared failure domain</li> <li>Server crash affects all sessions</li> </ul>"},{"location":"architecture/process-model/#sbsh-architecture","title":"sbsh Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Supervisor  \u2502  \u2502 Supervisor  \u2502  \u2502 Supervisor  \u2502\n\u2502     1       \u2502  \u2502     2       \u2502  \u2502     3       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502                \u2502                \u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n         \u2502   Terminal  \u2502  Independent process\n         \u2502  (Process)  \u2502  Not a child of supervisor\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  Survives supervisor exit\n</code></pre> <p>Benefits:</p> <ul> <li>No single point of failure</li> <li>Isolated failure domains</li> <li>Supervisor crashes don't affect terminals</li> <li>True process independence</li> </ul>"},{"location":"architecture/process-model/#process-independence","title":"Process Independence","text":""},{"location":"architecture/process-model/#terminal-processes","title":"Terminal Processes","text":"<p>Terminals run as independent processes:</p> <ul> <li>Own process group</li> <li>Not children of supervisors</li> <li>Continue running if supervisor exits</li> <li>Can be attached to by new supervisors</li> </ul>"},{"location":"architecture/process-model/#supervisor-processes","title":"Supervisor Processes","text":"<p>Supervisors are lightweight:</p> <ul> <li>Manage terminal attachment</li> <li>Forward I/O</li> <li>Can exit without affecting terminals</li> <li>New supervisors can attach to existing terminals</li> </ul>"},{"location":"architecture/process-model/#process-lifecycle","title":"Process Lifecycle","text":""},{"location":"architecture/process-model/#terminal-lifecycle","title":"Terminal Lifecycle","text":"<pre><code>Terminal Process\n\u251c\u2500\u2500 Spawned (independent)\n\u251c\u2500\u2500 Initializing (onInit hooks)\n\u251c\u2500\u2500 Ready (accepting input)\n\u251c\u2500\u2500 Running (executing commands)\n\u2514\u2500\u2500 Exited (or restarted per policy)\n</code></pre>"},{"location":"architecture/process-model/#supervisor-lifecycle","title":"Supervisor Lifecycle","text":"<pre><code>Supervisor Process\n\u251c\u2500\u2500 Created\n\u251c\u2500\u2500 Attaching (connecting to terminal)\n\u251c\u2500\u2500 Attached (forwarding I/O)\n\u251c\u2500\u2500 Detached (disconnected)\n\u2514\u2500\u2500 Exited (terminal continues)\n</code></pre>"},{"location":"architecture/process-model/#isolation-benefits","title":"Isolation Benefits","text":""},{"location":"architecture/process-model/#failure-isolation","title":"Failure Isolation","text":"<ul> <li>Terminal crash doesn't affect other terminals</li> <li>Supervisor crash doesn't affect terminals</li> <li>No cascading failures</li> <li>Each terminal is self-contained</li> </ul>"},{"location":"architecture/process-model/#resource-isolation","title":"Resource Isolation","text":"<ul> <li>Each terminal has its own process</li> <li>Independent resource limits</li> <li>No shared memory or state</li> <li>Clean process boundaries</li> </ul>"},{"location":"architecture/process-model/#multi-attach-process-model","title":"Multi-Attach Process Model","text":"<p>Multiple supervisors can attach to the same terminal:</p> <pre><code>Terminal Process\n\u251c\u2500\u2500 Supervisor 1 (process A)\n\u251c\u2500\u2500 Supervisor 2 (process B)\n\u2514\u2500\u2500 Supervisor 3 (process C)\n</code></pre> <p>All supervisors connect via the same Unix domain socket. The terminal broadcasts output to all attached supervisors.</p>"},{"location":"architecture/process-model/#process-groups","title":"Process Groups","text":"<p>Terminals run in their own process groups:</p> <ul> <li>Isolated from parent process</li> <li>Can be managed independently</li> <li>Proper signal handling</li> <li>Clean process tree</li> </ul>"},{"location":"architecture/process-model/#related-documentation","title":"Related Documentation","text":"<ul> <li>Architecture Overview - System architecture</li> <li>Terminals - Terminal lifecycle</li> <li>Supervisor - Supervisor architecture</li> <li>Comparison Guide - Comparison with screen/tmux</li> </ul>"},{"location":"cli/commands/","title":"CLI Commands Overview","text":"<p>sbsh provides three main commands through a single binary using hard links (busybox-style):</p> Command Purpose Launches Attached <code>sbsh</code> Interactive terminal Supervisor + Terminal Yes <code>sbsh terminal</code> Background terminal Terminal only No (detached) <code>sb</code> Management client Nothing (client only) N/A <p>All three are the same binary; behavior is determined by the executable name at runtime.</p>"},{"location":"cli/commands/#command-comparison","title":"Command Comparison","text":""},{"location":"cli/commands/#sbsh-interactive-supervisor-terminal","title":"<code>sbsh</code> - Interactive Supervisor + Terminal","text":"<p>Launches a supervisor attached to a terminal. Designed for interactive use:</p> <pre><code>sbsh\nsbsh -p profile-name\n</code></pre> <p>Features:</p> <ul> <li>Supervisor stays attached</li> <li>Press <code>Ctrl-]</code> twice to detach</li> <li>Terminal continues running after detach</li> </ul>"},{"location":"cli/commands/#sbsh-terminal-terminal-only","title":"<code>sbsh terminal</code> - Terminal Only","text":"<p>Launches a terminal in the background with no attached supervisor:</p> <pre><code>sbsh terminal --name my-terminal\nsbsh terminal --name my-terminal -p profile-name\n</code></pre> <p>Features:</p> <ul> <li>Terminal runs independently</li> <li>No supervisor attached initially</li> <li>Attach later with <code>sb attach &lt;name&gt;</code></li> <li>Perfect for automation and background tasks</li> </ul>"},{"location":"cli/commands/#sb-client-management-tool","title":"<code>sb</code> - Client Management Tool","text":"<p>Pure client tool for managing existing supervisors and terminals:</p> <pre><code>sb get terminals\nsb attach &lt;name&gt;\nsb detach\nsb get profiles\n</code></pre> <p>Features:</p> <ul> <li>No process spawning</li> <li>Works from any machine with socket access</li> <li>Query and manage existing terminals</li> </ul>"},{"location":"cli/commands/#common-workflows","title":"Common Workflows","text":""},{"location":"cli/commands/#start-and-detach","title":"Start and Detach","text":"<pre><code># Start interactive terminal\nsbsh -p my-profile\n\n# Detach (press Ctrl-] twice)\n# Terminal keeps running\n\n# Reattach later\nsb attach my-terminal\n</code></pre>"},{"location":"cli/commands/#background-terminal","title":"Background Terminal","text":"<pre><code># Start background terminal\nsbsh terminal --name background-task -p my-profile\n\n# Attach when needed\nsb attach background-task\n</code></pre>"},{"location":"cli/commands/#list-and-manage","title":"List and Manage","text":"<pre><code># List terminals\nsb get terminals\n\n# List profiles\nsb get profiles\n\n# Get terminal details\nsb get terminal my-terminal\n</code></pre>"},{"location":"cli/commands/#see-also","title":"See Also","text":"<ul> <li>sbsh Command - Complete <code>sbsh</code> reference</li> <li>sb Command - Complete <code>sb</code> reference</li> </ul>"},{"location":"cli/sb/","title":"sb Command","text":"<p>The <code>sb</code> command is a pure client tool for managing existing supervisors and terminals. It doesn't spawn any processes itself\u2014it only connects to existing terminals.</p>"},{"location":"cli/sb/#usage","title":"Usage","text":"<pre><code>sb [command] [flags]\n</code></pre>"},{"location":"cli/sb/#commands","title":"Commands","text":""},{"location":"cli/sb/#sb-attach-alias-a","title":"<code>sb attach</code> (alias: <code>a</code>)","text":"<p>Attach to an existing terminal:</p> <pre><code>sb attach &lt;name-or-id&gt;\nsb attach my-terminal\nsb attach abc123\n</code></pre> <p>Flags:</p> <ul> <li><code>--id &lt;id&gt;</code>: Terminal ID (mutually exclusive with <code>--name</code>)</li> <li><code>--name &lt;name&gt;</code>: Terminal name (mutually exclusive with <code>--id</code>)</li> <li><code>--socket &lt;file&gt;</code>: Socket file path</li> </ul>"},{"location":"cli/sb/#sb-detach","title":"<code>sb detach</code>","text":"<p>Detach from a terminal:</p> <pre><code>sb detach\nsb detach &lt;name-or-id&gt;\n</code></pre>"},{"location":"cli/sb/#sb-get","title":"<code>sb get</code>","text":"<p>Query terminals, supervisors, and profiles:</p> <pre><code># List terminals\nsb get terminals\n\n# List supervisors\nsb get supervisors\n\n# List profiles\nsb get profiles\n\n# Get specific terminal\nsb get terminal &lt;name-or-id&gt;\n\n# Get specific supervisor\nsb get supervisor &lt;name-or-id&gt;\n\n# Get specific profile\nsb get profile &lt;name&gt;\n</code></pre> <p>Flags:</p> <ul> <li><code>-a, --all</code>: Show all terminals/supervisors including exited ones</li> <li><code>-o, --output &lt;format&gt;</code>: Output format (json, yaml, or human-readable)</li> </ul>"},{"location":"cli/sb/#sb-prune","title":"<code>sb prune</code>","text":"<p>Prune old terminals and supervisors:</p> <pre><code>sb prune\nsb prune --older-than 30d\n</code></pre> <p>Flags:</p> <ul> <li><code>--older-than &lt;duration&gt;</code>: Prune terminals/supervisors older than duration (e.g., <code>30d</code>, <code>1w</code>, <code>2h</code>)</li> </ul>"},{"location":"cli/sb/#sb-version","title":"<code>sb version</code>","text":"<p>Show version information:</p> <pre><code>sb version\n</code></pre>"},{"location":"cli/sb/#sb-autocomplete","title":"<code>sb autocomplete</code>","text":"<p>Generate shell completion:</p> <pre><code>sb autocomplete bash\nsb autocomplete zsh\n</code></pre>"},{"location":"cli/sb/#persistent-flags","title":"Persistent Flags","text":"<p>These flags apply to all <code>sb</code> commands:</p> <ul> <li><code>--config &lt;file&gt;</code>: Config file (default: <code>$HOME/.sbsh/config.yaml</code>)</li> <li><code>-v, --verbose</code>: Enable verbose logging</li> <li><code>--log-level &lt;level&gt;</code>: Log level (debug, info, warn, error)</li> <li><code>--run-path &lt;path&gt;</code>: Run path directory</li> </ul>"},{"location":"cli/sb/#examples","title":"Examples","text":""},{"location":"cli/sb/#list-active-terminals","title":"List Active Terminals","text":"<pre><code>sb get terminals\n</code></pre>"},{"location":"cli/sb/#attach-to-terminal-by-name","title":"Attach to Terminal by Name","text":"<pre><code>sb attach my-terminal\n</code></pre>"},{"location":"cli/sb/#attach-to-terminal-by-id","title":"Attach to Terminal by ID","text":"<pre><code>sb attach abc123\n</code></pre>"},{"location":"cli/sb/#list-all-terminals-including-exited","title":"List All Terminals (Including Exited)","text":"<pre><code>sb get terminals -a\n</code></pre>"},{"location":"cli/sb/#get-terminal-details-json","title":"Get Terminal Details (JSON)","text":"<pre><code>sb get terminal my-terminal -o json\n</code></pre>"},{"location":"cli/sb/#get-profile-details","title":"Get Profile Details","text":"<pre><code>sb get profile terraform-prd\n</code></pre>"},{"location":"cli/sb/#prune-old-terminals","title":"Prune Old Terminals","text":"<pre><code>sb prune --older-than 7d\n</code></pre>"},{"location":"cli/sb/#output-formats","title":"Output Formats","text":""},{"location":"cli/sb/#human-readable-default","title":"Human-Readable (Default)","text":"<pre><code>sb get terminals\n</code></pre>"},{"location":"cli/sb/#json","title":"JSON","text":"<pre><code>sb get terminals -o json\n</code></pre>"},{"location":"cli/sb/#yaml","title":"YAML","text":"<pre><code>sb get terminals -o yaml\n</code></pre>"},{"location":"cli/sb/#see-also","title":"See Also","text":"<ul> <li>sbsh Command - Interactive supervisor + terminal</li> <li>Commands Overview - Command comparison</li> <li>Getting Started - Basic usage</li> </ul>"},{"location":"cli/sbsh/","title":"sbsh Command","text":"<p>The <code>sbsh</code> command launches a supervisor attached to a terminal. It's designed for interactive use and can be set as your login shell.</p>"},{"location":"cli/sbsh/#usage","title":"Usage","text":"<pre><code>sbsh [flags]\nsbsh terminal [flags]\n</code></pre>"},{"location":"cli/sbsh/#commands","title":"Commands","text":""},{"location":"cli/sbsh/#sbsh-default","title":"<code>sbsh</code> (default)","text":"<p>Launches a supervisor attached to a terminal:</p> <pre><code>sbsh\nsbsh -p profile-name\n</code></pre> <p>Behavior:</p> <ul> <li>Supervisor stays attached to terminal</li> <li>Press <code>Ctrl-]</code> twice to detach</li> <li>Terminal continues running after detach</li> </ul>"},{"location":"cli/sbsh/#sbsh-terminal","title":"<code>sbsh terminal</code>","text":"<p>Launches a terminal in the background with no attached supervisor:</p> <pre><code>sbsh terminal --name my-terminal\nsbsh terminal --name my-terminal -p profile-name\n</code></pre> <p>Behavior:</p> <ul> <li>Terminal runs independently</li> <li>No supervisor attached initially</li> <li>Attach later with <code>sb attach &lt;name&gt;</code></li> <li>Important: Always use <code>--name</code> to identify the terminal</li> </ul>"},{"location":"cli/sbsh/#flags","title":"Flags","text":""},{"location":"cli/sbsh/#persistent-flags","title":"Persistent Flags","text":"<p>These flags apply to all <code>sbsh</code> commands:</p> <ul> <li><code>--run-path &lt;path&gt;</code>: Optional run path for the supervisor</li> <li><code>--config &lt;file&gt;</code>: Config file (default: <code>$HOME/.sbsh/config.yaml</code>)</li> <li><code>--profiles &lt;file&gt;</code>: Profiles manifests file (default: <code>$HOME/.sbsh/profiles.yaml</code>)</li> </ul>"},{"location":"cli/sbsh/#supervisor-flags","title":"Supervisor Flags","text":"<ul> <li><code>--id &lt;id&gt;</code>: Optional ID for the supervisor</li> <li><code>--socket &lt;file&gt;</code>: Optional socket file for the supervisor</li> <li><code>--log-file &lt;file&gt;</code>: Optional log file for the supervisor</li> <li><code>--log-level &lt;level&gt;</code>: Optional log level (debug, info, warn, error)</li> <li><code>-d, --detach</code>: Detach supervisor immediately</li> <li><code>--disable-detach</code>: Disable detach keystroke (<code>Ctrl-]</code> twice)</li> </ul>"},{"location":"cli/sbsh/#terminal-flags","title":"Terminal Flags","text":"<ul> <li><code>--terminal-id &lt;id&gt;</code>: Optional terminal ID (random if omitted)</li> <li><code>--terminal-name &lt;name&gt;</code>: Optional name for the terminal</li> <li><code>-p, --profile &lt;name&gt;</code>: Profile for the terminal</li> <li><code>--terminal-command &lt;cmd&gt;</code>: Command to run (default: <code>/bin/bash</code>)</li> <li><code>--terminal-socket &lt;file&gt;</code>: Optional socket file for the terminal</li> <li><code>--capture-file &lt;file&gt;</code>: Optional filename for the terminal log</li> <li><code>--terminal-logfile &lt;file&gt;</code>: Optional filename for the terminal log</li> <li><code>--terminal-loglevel &lt;level&gt;</code>: Optional log level for the terminal</li> <li><code>--terminal-disable-set-prompt</code>: Disable setting the prompt</li> </ul>"},{"location":"cli/sbsh/#examples","title":"Examples","text":""},{"location":"cli/sbsh/#start-with-default-profile","title":"Start with Default Profile","text":"<pre><code>sbsh\n</code></pre>"},{"location":"cli/sbsh/#start-with-profile","title":"Start with Profile","text":"<pre><code>sbsh -p terraform-prd\n</code></pre>"},{"location":"cli/sbsh/#start-background-terminal","title":"Start Background Terminal","text":"<pre><code>sbsh terminal --name my-terminal -p k8s-default\n</code></pre>"},{"location":"cli/sbsh/#start-with-custom-command","title":"Start with Custom Command","text":"<pre><code>sbsh --terminal-command /bin/zsh\n</code></pre>"},{"location":"cli/sbsh/#start-with-detach-flag","title":"Start with Detach Flag","text":"<pre><code>sbsh -d -p my-profile\n</code></pre>"},{"location":"cli/sbsh/#subcommands","title":"Subcommands","text":""},{"location":"cli/sbsh/#sbsh-terminal_1","title":"<code>sbsh terminal</code>","text":"<p>Launch a terminal without an attached supervisor:</p> <pre><code>sbsh terminal --name my-terminal\n</code></pre>"},{"location":"cli/sbsh/#sbsh-version","title":"<code>sbsh version</code>","text":"<p>Show version information:</p> <pre><code>sbsh version\n</code></pre>"},{"location":"cli/sbsh/#sbsh-autocomplete","title":"<code>sbsh autocomplete</code>","text":"<p>Generate shell completion:</p> <pre><code>sbsh autocomplete bash\nsbsh autocomplete zsh\n</code></pre>"},{"location":"cli/sbsh/#environment-variables","title":"Environment Variables","text":"<ul> <li><code>SBSH_PROFILES_FILE</code>: Path to profiles file (overrides <code>--profiles</code>)</li> </ul>"},{"location":"cli/sbsh/#see-also","title":"See Also","text":"<ul> <li>sb Command - Management client</li> <li>Commands Overview - Command comparison</li> <li>Getting Started - Basic usage</li> </ul>"},{"location":"concepts/environment-isolation/","title":"Environment Isolation","text":"<p>sbsh provides control over environment variable inheritance and isolation, enabling reproducible environments.</p>"},{"location":"concepts/environment-isolation/#environment-inheritance","title":"Environment Inheritance","text":""},{"location":"concepts/environment-isolation/#inheritenv-true-default","title":"<code>inheritEnv: true</code> (Default)","text":"<p>When <code>inheritEnv</code> is <code>true</code>, the terminal inherits all environment variables from the parent process:</p> <pre><code>spec:\n  shell:\n    inheritEnv: true\n    env:\n      CUSTOM_VAR: \"value\"\n</code></pre> <p>Use when:</p> <ul> <li>You need access to system PATH</li> <li>SSH_AUTH_SOCK and other system variables are required</li> <li>Full environment access is needed</li> </ul>"},{"location":"concepts/environment-isolation/#inheritenv-false","title":"<code>inheritEnv: false</code>","text":"<p>When <code>inheritEnv</code> is <code>false</code>, the terminal starts with a minimal environment. Only variables specified in <code>env</code> are available:</p> <pre><code>spec:\n  shell:\n    inheritEnv: false\n    env:\n      LANG: en_US.UTF-8\n      PATH: /usr/bin:/bin\n      CUSTOM_VAR: \"value\"\n</code></pre> <p>Use when:</p> <ul> <li>You want reproducible, isolated environments</li> <li>CI/CD environments that should be clean</li> <li>Testing with controlled environments</li> </ul>"},{"location":"concepts/environment-isolation/#environment-variable-configuration","title":"Environment Variable Configuration","text":""},{"location":"concepts/environment-isolation/#basic-variables","title":"Basic Variables","text":"<pre><code>spec:\n  shell:\n    env:\n      KEY: value\n      NUMBER: \"5000\" # Numbers must be quoted\n      PATH: \"$HOME/bin:$PATH\" # Can reference other variables\n</code></pre>"},{"location":"concepts/environment-isolation/#variable-expansion","title":"Variable Expansion","text":"<p>Variables can reference other variables:</p> <pre><code>spec:\n  shell:\n    env:\n      HOME: /home/user\n      PROJECT_DIR: \"$HOME/projects\"\n      PATH: \"$PROJECT_DIR/bin:$PATH\"\n</code></pre>"},{"location":"concepts/environment-isolation/#special-variables","title":"Special Variables","text":"<p>sbsh provides special variables:</p> <ul> <li><code>$SBSH_TERM_ID</code>: Current terminal ID</li> <li><code>$SBSH_TERM_PROFILE</code>: Current profile name</li> </ul>"},{"location":"concepts/environment-isolation/#working-directory","title":"Working Directory","text":"<p>Set the working directory with <code>cwd</code>:</p> <pre><code>spec:\n  shell:\n    cwd: \"~\" # Home directory\n    # cwd: \"$HOME/projects\"  # Expanded path\n    # cwd: \"/absolute/path\"  # Absolute path\n</code></pre>"},{"location":"concepts/environment-isolation/#isolation-levels","title":"Isolation Levels","text":""},{"location":"concepts/environment-isolation/#minimal-isolation","title":"Minimal Isolation","text":"<pre><code>spec:\n  shell:\n    inheritEnv: false\n    env:\n      LANG: en_US.UTF-8\n      PATH: /usr/bin:/bin\n</code></pre>"},{"location":"concepts/environment-isolation/#full-isolation","title":"Full Isolation","text":"<pre><code>spec:\n  shell:\n    inheritEnv: false\n    env:\n      LANG: en_US.UTF-8\n      PATH: /usr/bin:/bin\n      HOME: /home/user\n      USER: user\n      SHELL: /bin/bash\n</code></pre>"},{"location":"concepts/environment-isolation/#selective-inheritance","title":"Selective Inheritance","text":"<pre><code>spec:\n  shell:\n    inheritEnv: true\n    env:\n      NODE_ENV: \"production\" # Override inherited value\n      CUSTOM_VAR: \"value\" # Add new variable\n</code></pre>"},{"location":"concepts/environment-isolation/#best-practices","title":"Best Practices","text":"<ol> <li>Use <code>inheritEnv: false</code> for CI/CD: Ensures reproducible environments</li> <li>Use <code>inheritEnv: true</code> for development: Convenient access to system tools</li> <li>Quote numbers: <code>HISTSIZE: \"5000\"</code> not <code>HISTSIZE: 5000</code></li> <li>Use <code>$HOME</code> not <code>~</code>: In env values, use <code>$HOME</code> for expansion</li> <li>Document required variables: List dependencies in profile comments</li> </ol>"},{"location":"concepts/environment-isolation/#related-concepts","title":"Related Concepts","text":"<ul> <li>Profiles - Profile configuration</li> <li>Terminals - Terminal lifecycle</li> <li>Profiles Guide - Complete profile reference</li> </ul>"},{"location":"concepts/event-log/","title":"Event Log","text":"<p>sbsh captures complete I/O for every terminal, providing a full audit trail and enabling debugging and replay capabilities.</p>"},{"location":"concepts/event-log/#log-storage","title":"Log Storage","text":"<p>Terminal logs are stored in <code>~/.sbsh/run/terminals/&lt;id&gt;/capture.log</code>, containing:</p> <ul> <li>All terminal input</li> <li>All terminal output</li> <li>Timestamps (planned)</li> <li>I/O direction markers</li> </ul>"},{"location":"concepts/event-log/#log-structure","title":"Log Structure","text":"<p>The capture log contains raw terminal I/O:</p> <pre><code>[timestamp] &gt; input data\n[timestamp] &lt; output data\n</code></pre> <p>This provides a complete record of all terminal activity.</p>"},{"location":"concepts/event-log/#use-cases","title":"Use Cases","text":""},{"location":"concepts/event-log/#debugging","title":"Debugging","text":"<p>Review terminal logs to understand what happened:</p> <pre><code># View terminal log\ncat ~/.sbsh/run/terminals/my-terminal/capture.log\n</code></pre>"},{"location":"concepts/event-log/#audit-trail","title":"Audit Trail","text":"<p>Complete I/O capture provides an audit trail for:</p> <ul> <li>Security auditing</li> <li>Compliance requirements</li> <li>Incident investigation</li> <li>Process documentation</li> </ul>"},{"location":"concepts/event-log/#cicd-integration","title":"CI/CD Integration","text":"<p>Terminal logs are captured in CI/CD pipelines:</p> <pre><code># GitHub Actions\n- name: Upload terminal logs\n  if: failure()\n  uses: actions/upload-artifact@v3\n  with:\n    name: terminal-logs\n    path: ~/.sbsh/run/terminals/*\n</code></pre> <p>See the CI/CD Guide for details.</p>"},{"location":"concepts/event-log/#log-management","title":"Log Management","text":""},{"location":"concepts/event-log/#log-size","title":"Log Size","text":"<p>Terminal logs can grow large over time. Consider:</p> <ul> <li>Regular cleanup of old terminals</li> <li>Log rotation (planned)</li> <li>Compression (planned)</li> </ul>"},{"location":"concepts/event-log/#log-retention","title":"Log Retention","text":"<p>Terminal logs persist until the terminal is pruned:</p> <pre><code># Prune old terminals\nsb prune --older-than 30d\n</code></pre>"},{"location":"concepts/event-log/#metadata","title":"Metadata","text":"<p>Terminal metadata is stored alongside logs in <code>~/.sbsh/run/terminals/&lt;id&gt;/meta.json</code>:</p> <ul> <li>Terminal state</li> <li>Environment variables</li> <li>Profile information</li> <li>Lifecycle events</li> <li>Attacher history</li> </ul>"},{"location":"concepts/event-log/#future-enhancements","title":"Future Enhancements","text":"<p>Planned features:</p> <ul> <li>Timestamp precision</li> <li>Log compression (xz)</li> <li>Terminal replay based on capture</li> <li>Structured log format</li> </ul>"},{"location":"concepts/event-log/#related-concepts","title":"Related Concepts","text":"<ul> <li>Terminals - Terminal lifecycle</li> <li>Terminal State - State management</li> <li>CI/CD Guide - CI/CD integration</li> </ul>"},{"location":"concepts/multi-attach/","title":"Multi-Attach","text":"<p>sbsh supports multiple supervisors attaching to the same terminal concurrently. This enables collaborative debugging, pair programming, and shared terminal sessions.</p>"},{"location":"concepts/multi-attach/#how-multi-attach-works","title":"How Multi-Attach Works","text":"<p>Multiple supervisors can connect to the same terminal simultaneously:</p> <pre><code>Terminal (my-terminal)\n\u251c\u2500\u2500 Supervisor 1 (user@host1)\n\u251c\u2500\u2500 Supervisor 2 (user@host2)\n\u2514\u2500\u2500 Supervisor 3 (user@host3)\n</code></pre> <p>All supervisors see the same terminal output and can send input. Input from any supervisor is forwarded to the terminal.</p>"},{"location":"concepts/multi-attach/#use-cases","title":"Use Cases","text":""},{"location":"concepts/multi-attach/#pair-programming","title":"Pair Programming","text":"<p>Two developers can attach to the same terminal:</p> <pre><code># Developer 1\nsb attach debug-session\n\n# Developer 2 (from different machine)\nsb attach debug-session\n</code></pre> <p>Both see the same output and can collaborate in real-time.</p>"},{"location":"concepts/multi-attach/#collaborative-debugging","title":"Collaborative Debugging","text":"<p>Multiple team members can attach to a shared debugging terminal:</p> <pre><code># Team member 1\nsb attach production-debug\n\n# Team member 2\nsb attach production-debug\n\n# Team member 3\nsb attach production-debug\n</code></pre>"},{"location":"concepts/multi-attach/#shared-infrastructure-terminals","title":"Shared Infrastructure Terminals","text":"<p>Team members can access shared maintenance terminals:</p> <pre><code># SRE attaches to shared terminal\nsb attach k8s-maintenance\n\n# Developer attaches to same terminal\nsb attach k8s-maintenance\n</code></pre>"},{"location":"concepts/multi-attach/#multi-attach-behavior","title":"Multi-Attach Behavior","text":""},{"location":"concepts/multi-attach/#input-handling","title":"Input Handling","text":"<p>Input from any attached supervisor is forwarded to the terminal. If multiple supervisors send input simultaneously, it's interleaved.</p>"},{"location":"concepts/multi-attach/#output-broadcasting","title":"Output Broadcasting","text":"<p>Terminal output is broadcast to all attached supervisors. Each supervisor receives a copy of all output.</p>"},{"location":"concepts/multi-attach/#detachment","title":"Detachment","text":"<p>When a supervisor detaches, other supervisors remain attached. The terminal continues running independently.</p>"},{"location":"concepts/multi-attach/#discovery-across-machines","title":"Discovery Across Machines","text":"<p>Multi-attach works across machines when they share access to the <code>~/.sbsh</code> directory:</p> <pre><code># Machine 1\nsbsh -p my-profile --name shared-terminal\n\n# Machine 2 (with shared ~/.sbsh)\nsb attach shared-terminal\n</code></pre>"},{"location":"concepts/multi-attach/#limitations","title":"Limitations","text":"<ul> <li>Input from multiple supervisors is interleaved (no coordination)</li> <li>All supervisors see the same output (no filtering)</li> <li>Requires shared filesystem access for cross-machine multi-attach</li> </ul>"},{"location":"concepts/multi-attach/#related-concepts","title":"Related Concepts","text":"<ul> <li>Terminals - Terminal lifecycle</li> <li>Supervisor - Supervisor architecture</li> <li>Terminal State - State management</li> </ul>"},{"location":"concepts/profiles/","title":"Profiles","text":"<p>Profiles are declarative YAML manifests that define terminal environments. They specify environment variables, lifecycle hooks, startup commands, and visual prompts.</p>"},{"location":"concepts/profiles/#profile-structure","title":"Profile Structure","text":"<p>Each profile is a YAML document with the following structure:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: profile-name\nspec:\n  runTarget: local\n  restartPolicy: exit\n  shell:\n    cwd: \"~\"\n    cmd: /bin/bash\n    cmdArgs: []\n    inheritEnv: true\n    env:\n      KEY: value\n    prompt: \"custom prompt\"\n  stages:\n    onInit:\n      - script: echo \"Starting...\"\n    postAttach:\n      - script: echo \"Attached!\"\n</code></pre>"},{"location":"concepts/profiles/#profile-components","title":"Profile Components","text":""},{"location":"concepts/profiles/#metadata","title":"Metadata","text":"<ul> <li><code>name</code>: Unique identifier for the profile (required)</li> </ul>"},{"location":"concepts/profiles/#spec","title":"Spec","text":"<ul> <li><code>runTarget</code>: Where the terminal runs (currently only <code>local</code>)</li> <li><code>restartPolicy</code>: Behavior on exit (<code>exit</code>, <code>restart-on-error</code>, <code>restart-unlimited</code>)</li> <li><code>shell</code>: Command and environment configuration</li> <li><code>stages</code>: Lifecycle hooks (<code>onInit</code>, <code>postAttach</code>)</li> </ul>"},{"location":"concepts/profiles/#profile-storage","title":"Profile Storage","text":"<p>Profiles are stored in <code>~/.sbsh/profiles.yaml</code> by default. Multiple profiles are defined in the same file, separated by <code>---</code> (YAML document separator).</p>"},{"location":"concepts/profiles/#profile-discovery","title":"Profile Discovery","text":"<p>List available profiles:</p> <pre><code>sb get profiles\n</code></pre>"},{"location":"concepts/profiles/#using-profiles","title":"Using Profiles","text":"<p>Start a terminal with a profile:</p> <pre><code>sbsh -p profile-name\n</code></pre>"},{"location":"concepts/profiles/#profile-examples","title":"Profile Examples","text":"<p>See the Profiles Guide for comprehensive examples and reference documentation.</p>"},{"location":"concepts/profiles/#related-concepts","title":"Related Concepts","text":"<ul> <li>Terminals - Terminal lifecycle</li> <li>Environment Isolation - Environment configuration</li> <li>Profiles Guide - Complete profile reference</li> </ul>"},{"location":"concepts/supervisor/","title":"Supervisor","text":"<p>A supervisor is a lightweight process that manages and attaches to terminals. Supervisors provide the control interface for terminals, handling attachment, detachment, and lifecycle management.</p>"},{"location":"concepts/supervisor/#supervisor-role","title":"Supervisor Role","text":"<p>Supervisors serve several key functions:</p> <ul> <li>Terminal management: Create, attach to, and manage terminals</li> <li>I/O forwarding: Forward input/output between user and terminal</li> <li>Lifecycle coordination: Coordinate terminal initialization and hooks</li> <li>Metadata management: Track terminal state and attachers</li> </ul>"},{"location":"concepts/supervisor/#supervisor-types","title":"Supervisor Types","text":""},{"location":"concepts/supervisor/#interactive-supervisor-sbsh","title":"Interactive Supervisor (<code>sbsh</code>)","text":"<p>Launches a supervisor attached to a terminal. Designed for interactive use:</p> <pre><code>sbsh -p my-profile\n</code></pre> <p>The supervisor stays attached until you detach (press <code>Ctrl-]</code> twice).</p>"},{"location":"concepts/supervisor/#background-supervisor","title":"Background Supervisor","text":"<p>Created when you attach to an existing terminal:</p> <pre><code>sb attach my-terminal\n</code></pre> <p>This creates a supervisor that connects to the terminal, then exits when you detach.</p>"},{"location":"concepts/supervisor/#supervisor-independence","title":"Supervisor Independence","text":"<p>Key architectural principles:</p> <ul> <li>No central server: Each supervisor is independent</li> <li>Terminal survival: Terminals continue running if supervisor exits</li> <li>Multi-attach: Multiple supervisors can attach to the same terminal</li> <li>Process isolation: Supervisor crashes don't affect terminals</li> </ul>"},{"location":"concepts/supervisor/#supervisor-lifecycle","title":"Supervisor Lifecycle","text":"<pre><code>Created \u2192 Attaching \u2192 Attached \u2192 [Detached] \u2192 Exited\n</code></pre> <ol> <li>Created: Supervisor process spawned</li> <li>Attaching: Connecting to terminal socket</li> <li>Attached: Connected and forwarding I/O</li> <li>Detached: Disconnected but terminal continues</li> <li>Exited: Supervisor process terminated</li> </ol>"},{"location":"concepts/supervisor/#supervisor-metadata","title":"Supervisor Metadata","text":"<p>Supervisor state is stored in <code>~/.sbsh/run/supervisors/&lt;id&gt;/meta.json</code>, including:</p> <ul> <li>Terminal ID being managed</li> <li>Attachment status</li> <li>Creation timestamp</li> <li>Process information</li> </ul>"},{"location":"concepts/supervisor/#related-concepts","title":"Related Concepts","text":"<ul> <li>Terminals - Terminal lifecycle</li> <li>Multi-Attach - Multiple supervisors</li> <li>Terminal State - State management</li> </ul>"},{"location":"concepts/terminal-state/","title":"Terminal State","text":"<p>Terminals transition through several states during their lifecycle. Understanding these states is crucial for managing terminals effectively.</p>"},{"location":"concepts/terminal-state/#terminal-states","title":"Terminal States","text":""},{"location":"concepts/terminal-state/#initializing","title":"Initializing","text":"<p>The terminal is being created and <code>onInit</code> hooks are executing. Input is disabled during this state.</p> <p>Characteristics:</p> <ul> <li>Terminal process is running</li> <li><code>onInit</code> hooks are executing</li> <li>No input accepted yet</li> <li>Supervisor waits for Ready state</li> </ul>"},{"location":"concepts/terminal-state/#ready","title":"Ready","text":"<p>The terminal has completed initialization and is ready for input. This state is reached after all <code>onInit</code> hooks complete successfully.</p> <p>Characteristics:</p> <ul> <li>Terminal is fully initialized</li> <li>Ready to accept input</li> <li>Can be attached to</li> <li><code>postAttach</code> hooks will run on attach</li> </ul>"},{"location":"concepts/terminal-state/#attached","title":"Attached","text":"<p>A supervisor is currently connected to the terminal and forwarding I/O.</p> <p>Characteristics:</p> <ul> <li>Supervisor is connected</li> <li>I/O is being forwarded</li> <li>User can interact with terminal</li> <li>Multiple supervisors can attach (multi-attach)</li> </ul>"},{"location":"concepts/terminal-state/#detached","title":"Detached","text":"<p>The terminal is running but no supervisor is currently attached.</p> <p>Characteristics:</p> <ul> <li>Terminal continues running</li> <li>No active supervisor connection</li> <li>Can be reattached anytime</li> <li>Terminal process is independent</li> </ul>"},{"location":"concepts/terminal-state/#exited","title":"Exited","text":"<p>The terminal process has terminated.</p> <p>Characteristics:</p> <ul> <li>Terminal process is dead</li> <li>Cannot be attached to</li> <li>Metadata preserved for inspection</li> <li>May be restarted depending on <code>restartPolicy</code></li> </ul>"},{"location":"concepts/terminal-state/#state-transitions","title":"State Transitions","text":"<pre><code>Created \u2192 Initializing \u2192 Ready \u2192 [Attached/Detached] \u2192 Exited\n</code></pre>"},{"location":"concepts/terminal-state/#normal-flow","title":"Normal Flow","text":"<ol> <li>Created: Terminal process spawned</li> <li>Initializing: <code>onInit</code> hooks running</li> <li>Ready: Initialization complete</li> <li>Attached: Supervisor connects</li> <li>Detached: Supervisor disconnects (terminal continues)</li> <li>Exited: Terminal process terminates</li> </ol>"},{"location":"concepts/terminal-state/#with-restart-policy","title":"With Restart Policy","text":"<p>If <code>restartPolicy</code> is set to <code>restart-on-error</code> or <code>restart-unlimited</code>:</p> <pre><code>Exited \u2192 (restart) \u2192 Initializing \u2192 Ready \u2192 ...\n</code></pre>"},{"location":"concepts/terminal-state/#querying-terminal-state","title":"Querying Terminal State","text":"<pre><code># List terminals with state\nsb get terminals\n\n# Get specific terminal info\nsb get terminal my-terminal\n</code></pre>"},{"location":"concepts/terminal-state/#state-persistence","title":"State Persistence","text":"<p>Terminal state is persisted in <code>~/.sbsh/run/terminals/&lt;id&gt;/meta.json</code>, including:</p> <ul> <li>Current state</li> <li>State transitions</li> <li>Timestamps</li> <li>Attacher information</li> </ul>"},{"location":"concepts/terminal-state/#related-concepts","title":"Related Concepts","text":"<ul> <li>Terminals - Terminal lifecycle</li> <li>Supervisor - State management</li> <li>Event Log - State history</li> </ul>"},{"location":"concepts/terminals/","title":"Terminals","text":"<p>Terminals are the core abstraction in sbsh. A terminal represents an independent shell environment that runs persistently, separate from any supervisor process.</p>"},{"location":"concepts/terminals/#terminal-lifecycle","title":"Terminal Lifecycle","text":"<p>A terminal goes through several states during its lifecycle:</p> <pre><code>Created \u2192 Initializing \u2192 Ready \u2192 [Attached/Detached] \u2192 Exited\n</code></pre> <ol> <li>Created: Terminal process is spawned</li> <li>Initializing: <code>onInit</code> hooks are executing</li> <li>Ready: Terminal is ready for input (after <code>onInit</code> completes)</li> <li>Attached/Detached: Terminal can be attached to or detached from supervisors</li> <li>Exited: Terminal process has terminated</li> </ol> <p>See Terminal State for detailed state information.</p>"},{"location":"concepts/terminals/#terminal-independence","title":"Terminal Independence","text":"<p>Terminals run as independent processes with their own process groups. Key characteristics:</p> <ul> <li>Process isolation: Each terminal is a standalone process</li> <li>Survival guarantee: Terminals continue running even if supervisors exit</li> <li>Metadata persistence: Terminal state is stored on disk in <code>~/.sbsh/run/terminals/</code></li> <li>Socket-based communication: Supervisors communicate via Unix domain sockets</li> </ul>"},{"location":"concepts/terminals/#terminal-discovery","title":"Terminal Discovery","text":"<p>Terminals are discoverable by name or ID:</p> <pre><code># List all terminals\nsb get terminals\n\n# Attach by name\nsb attach my-terminal\n\n# Attach by ID\nsb attach abc123\n</code></pre> <p>Terminal metadata is stored in <code>~/.sbsh/run/terminals/&lt;id&gt;/meta.json</code>, enabling discovery from any machine with access to the run directory.</p>"},{"location":"concepts/terminals/#terminal-configuration","title":"Terminal Configuration","text":"<p>Terminals are configured via Profiles, which specify:</p> <ul> <li>Command and arguments (<code>cmd</code>, <code>cmdArgs</code>)</li> <li>Working directory (<code>cwd</code>)</li> <li>Environment variables (<code>env</code>)</li> <li>Lifecycle hooks (<code>onInit</code>, <code>postAttach</code>)</li> <li>Custom prompts</li> <li>Restart policies</li> </ul>"},{"location":"concepts/terminals/#related-concepts","title":"Related Concepts","text":"<ul> <li>Profiles - Terminal configuration</li> <li>Supervisor - Terminal management</li> <li>Terminal State - State management</li> <li>Multi-Attach - Multiple supervisors</li> <li>Event Log - I/O capture</li> </ul>"},{"location":"guides/cicd/","title":"CI/CD Integration with sbsh","text":"<p>sbsh profiles enable reproducible environments that work identically in local development and CI/CD pipelines. Define your environment once, use it everywhere \u2014 from pre-commit hooks to GitHub Actions, GitLab CI/CD, and Jenkins pipelines.</p>"},{"location":"guides/cicd/#key-benefits-for-cicd","title":"Key Benefits for CI/CD","text":"<ul> <li>Reproducibility: Same profile works locally and in CI \u2014 test what you ship</li> <li>Debugging: Failed CI runs create persistent terminals for inspection \u2014 no more \"works on my machine\"</li> <li>Version Control: Profiles are checked into your repo \u2014 environments as code</li> <li>Structured Logs: Complete I/O capture available as CI artifacts \u2014 full audit trail</li> <li>Team Consistency: Everyone uses the same environment configuration \u2014 eliminate setup drift</li> <li>Inspection: Reattach to failed CI runs to debug issues interactively</li> </ul>"},{"location":"guides/cicd/#local-cicd-workflows","title":"Local CI/CD Workflows","text":"<p>Use profiles for pre-commit hooks, local testing, and development workflows:</p>"},{"location":"guides/cicd/#pre-commit-hook-example","title":"Pre-commit Hook Example","text":"<pre><code># ~/.sbsh/profiles.yaml\napiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: test-env\nspec:\n  shell:\n    cwd: \"~/project\"\n    env:\n      NODE_ENV: \"test\"\n      CI: \"true\"\n  stages:\n    onInit:\n      - script: docker-compose up -d\n      - script: npm install\n      - script: npm run test\n</code></pre> <pre><code># .git/hooks/pre-commit\n#!/bin/bash\nsbsh -p test-env --name \"pre-commit-$(date +%s)\"\n</code></pre>"},{"location":"guides/cicd/#github-actions","title":"GitHub Actions","text":""},{"location":"guides/cicd/#setup","title":"Setup","text":"<p>Install sbsh in your GitHub Actions workflow:</p> <pre><code>- name: Setup sbsh\n  run: |\n    wget -O sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64\n    chmod +x sbsh &amp;&amp; sudo install -m 0755 sbsh /usr/local/bin/sbsh\n    sudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n</code></pre>"},{"location":"guides/cicd/#complete-workflow-example","title":"Complete Workflow Example","text":"<pre><code># .github/workflows/test.yml\nname: Tests\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup sbsh\n        run: |\n          wget -O sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64\n          chmod +x sbsh &amp;&amp; sudo install -m 0755 sbsh /usr/local/bin/sbsh\n          sudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n\n      - name: Create test profile\n        run: |\n          mkdir -p ~/.sbsh\n          cat &gt; ~/.sbsh/profiles.yaml &lt;&lt;EOF\n          apiVersion: sbsh/v1beta1\n          kind: TerminalProfile\n          metadata:\n            name: ci-test\n          spec:\n            shell:\n              cwd: \"${{ github.workspace }}\"\n              env:\n                CI: \"true\"\n                NODE_ENV: \"test\"\n            stages:\n              onInit:\n                - script: npm install\n                - script: npm run test\n          EOF\n\n      - name: Run tests\n        run: sbsh -p ci-test --name \"ci-${{ github.run_id }}\"\n\n      - name: Upload terminal logs\n        if: failure()\n        uses: actions/upload-artifact@v3\n        with:\n          name: terminal-logs-${{ github.run_id }}\n          path: ~/.sbsh/run/terminals/ci-${{ github.run_id }}/*\n          retention-days: 7\n</code></pre>"},{"location":"guides/cicd/#best-practices-for-github-actions","title":"Best Practices for GitHub Actions","text":"<ul> <li>Use unique terminal names: Include <code>github.run_id</code> or <code>github.run_number</code> to avoid conflicts</li> <li>Upload artifacts on failure: Capture terminal logs for debugging failed runs</li> <li>Set retention: Limit artifact retention to manage storage costs</li> <li>Use profiles from repo: Consider checking in profiles to your repository for version control</li> <li>Reusable workflows: Create reusable workflows for common test patterns</li> </ul>"},{"location":"guides/cicd/#using-profiles-from-repository","title":"Using Profiles from Repository","text":"<p>Instead of creating profiles inline, you can use profiles checked into your repository:</p> <pre><code>- name: Copy profiles from repository\n  run: |\n    mkdir -p ~/.sbsh\n    cp .github/profiles/ci-test.yaml ~/.sbsh/profiles.yaml\n    # Or combine multiple profiles\n    cat .github/profiles/*.yaml &gt; ~/.sbsh/profiles.yaml\n</code></pre>"},{"location":"guides/cicd/#gitlab-cicd","title":"GitLab CI/CD","text":""},{"location":"guides/cicd/#setup_1","title":"Setup","text":"<p>Install sbsh in your GitLab CI pipeline:</p> <pre><code>before_script:\n  - |\n    if ! command -v sbsh &amp;&gt; /dev/null; then\n      wget -O sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64\n      chmod +x sbsh &amp;&amp; sudo install -m 0755 sbsh /usr/local/bin/sbsh\n      sudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n    fi\n</code></pre>"},{"location":"guides/cicd/#complete-pipeline-example","title":"Complete Pipeline Example","text":"<pre><code># .gitlab-ci.yml\ntest:\n  image: ubuntu:latest\n  before_script:\n    - apt-get update &amp;&amp; apt-get install -y wget procps\n    - |\n      wget -O sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64\n      chmod +x sbsh &amp;&amp; sudo install -m 0755 sbsh /usr/local/bin/sbsh\n      sudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n  script:\n    - |\n      mkdir -p ~/.sbsh\n      cat &gt; ~/.sbsh/profiles.yaml &lt;&lt;EOF\n      apiVersion: sbsh/v1beta1\n      kind: TerminalProfile\n      metadata:\n        name: gitlab-test\n      spec:\n        shell:\n          cwd: \"$CI_PROJECT_DIR\"\n          env:\n            CI_JOB_ID: \"$CI_JOB_ID\"\n            CI_PROJECT_NAME: \"$CI_PROJECT_NAME\"\n        stages:\n          onInit:\n            - script: npm install\n            - script: npm run test\n      EOF\n    - sbsh -p gitlab-test --name \"gitlab-$CI_JOB_ID\"\n  artifacts:\n    when: always\n    paths:\n      - ~/.sbsh/run/terminals/gitlab-$CI_JOB_ID/*\n    expire_in: 1 week\n</code></pre>"},{"location":"guides/cicd/#best-practices-for-gitlab-cicd","title":"Best Practices for GitLab CI/CD","text":"<ul> <li>Use CI_JOB_ID: Unique job IDs ensure terminal names don't conflict</li> <li>Artifacts on always: Use <code>when: always</code> to capture logs even on success (useful for debugging)</li> <li>Set expiration: Use <code>expire_in</code> to manage artifact storage</li> <li>Use GitLab variables: Leverage <code>$CI_PROJECT_DIR</code>, <code>$CI_COMMIT_REF_NAME</code>, etc. for dynamic configuration</li> <li>Separate profiles: Store profiles in <code>.gitlab/profiles/</code> directory for organization</li> </ul>"},{"location":"guides/cicd/#using-profiles-from-repository_1","title":"Using Profiles from Repository","text":"<pre><code>test:\n  script:\n    - mkdir -p ~/.sbsh\n    - cp .gitlab/profiles/ci-test.yaml ~/.sbsh/profiles.yaml\n    - sbsh -p ci-test --name \"gitlab-$CI_JOB_ID\"\n</code></pre>"},{"location":"guides/cicd/#jenkins","title":"Jenkins","text":""},{"location":"guides/cicd/#setup_2","title":"Setup","text":"<p>Install sbsh in your Jenkins pipeline:</p> <pre><code>sh '''\n  wget -O sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64\n  chmod +x sbsh &amp;&amp; sudo mv sbsh /usr/local/bin/\n  sudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n'''\n</code></pre>"},{"location":"guides/cicd/#declarative-pipeline-example","title":"Declarative Pipeline Example","text":"<pre><code>// Jenkinsfile\npipeline {\n    agent any\n\n    environment {\n        SBSH_VERSION = 'v0.5.0'\n    }\n\n    stages {\n        stage('Setup') {\n            steps {\n                sh '''\n                    wget -O sbsh https://github.com/eminwux/sbsh/releases/download/${SBSH_VERSION}/sbsh-linux-amd64\n                    chmod +x sbsh &amp;&amp; sudo install -m 0755 sbsh /usr/local/bin/sbsh\n                    sudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n                '''\n            }\n        }\n\n        stage('Create Profile') {\n            steps {\n                sh '''\n                    mkdir -p ~/.sbsh\n                    cat &gt; ~/.sbsh/profiles.yaml &lt;&lt;EOF\n                    apiVersion: sbsh/v1beta1\n                    kind: TerminalProfile\n                    metadata:\n                      name: jenkins-test\n                    spec:\n                      shell:\n                        cwd: \"${WORKSPACE}\"\n                        env:\n                          BUILD_NUMBER: \"${BUILD_NUMBER}\"\n                          JOB_NAME: \"${JOB_NAME}\"\n                      stages:\n                        onInit:\n                          - script: npm install\n                          - script: npm run test\n                    EOF\n                '''\n            }\n        }\n\n        stage('Run Tests') {\n            steps {\n                sh 'sbsh -p jenkins-test --name \"jenkins-${BUILD_NUMBER}\"'\n            }\n        }\n    }\n\n    post {\n        always {\n            archiveArtifacts artifacts: '~/.sbsh/run/terminals/jenkins-*/**', allowEmptyArchive: true\n        }\n        failure {\n            echo 'Tests failed. Check terminal logs in archived artifacts.'\n        }\n    }\n}\n</code></pre>"},{"location":"guides/cicd/#scripted-pipeline-example","title":"Scripted Pipeline Example","text":"<pre><code>// Jenkinsfile (Scripted)\nnode {\n    def buildNumber = env.BUILD_NUMBER\n\n    stage('Setup') {\n        sh '''\n                    wget -O sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64\n                    chmod +x sbsh &amp;&amp; sudo install -m 0755 sbsh /usr/local/bin/sbsh\n            sudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n        '''\n    }\n\n    stage('Create Profile') {\n        sh \"\"\"\n            mkdir -p ~/.sbsh\n            cat &gt; ~/.sbsh/profiles.yaml &lt;&lt;EOF\n            apiVersion: sbsh/v1beta1\n            kind: TerminalProfile\n            metadata:\n              name: jenkins-test\n            spec:\n              shell:\n                cwd: \"\\${WORKSPACE}\"\n                env:\n                  BUILD_NUMBER: \"${buildNumber}\"\n                  JOB_NAME: \"\\${JOB_NAME}\"\n              stages:\n                onInit:\n                  - script: npm install\n                  - script: npm run test\n            EOF\n        \"\"\"\n    }\n\n    stage('Run Tests') {\n        sh \"sbsh -p jenkins-test --name jenkins-${buildNumber}\"\n    }\n\n    stage('Archive Artifacts') {\n        archiveArtifacts artifacts: \"~/.sbsh/run/terminals/jenkins-${buildNumber}/**\", allowEmptyArchive: true\n    }\n}\n</code></pre>"},{"location":"guides/cicd/#best-practices-for-jenkins","title":"Best Practices for Jenkins","text":"<ul> <li>Use BUILD_NUMBER: Ensure unique terminal names across builds</li> <li>Archive artifacts: Use <code>archiveArtifacts</code> to preserve terminal logs</li> <li>Post actions: Use <code>post { always { } }</code> to archive even on failure</li> <li>Workspace variables: Use <code>$WORKSPACE</code> and other Jenkins environment variables</li> <li>Version pinning: Store sbsh version in environment variable for easy updates</li> </ul>"},{"location":"guides/cicd/#using-profiles-from-repository_2","title":"Using Profiles from Repository","text":"<pre><code>stage('Copy Profiles') {\n    steps {\n        sh '''\n            mkdir -p ~/.sbsh\n            cp jenkins/profiles/ci-test.yaml ~/.sbsh/profiles.yaml\n        '''\n    }\n}\n</code></pre>"},{"location":"guides/cicd/#best-practices-all-platforms","title":"Best Practices (All Platforms)","text":""},{"location":"guides/cicd/#profile-management","title":"Profile Management","text":"<ul> <li>Version control profiles: Store profiles in your repository (<code>.github/profiles/</code>, <code>.gitlab/profiles/</code>, <code>jenkins/profiles/</code>)</li> <li>Reuse local profiles: Same profiles work locally and in CI \u2014 test locally first</li> <li>Profile naming: Use descriptive names like <code>ci-test</code>, <code>ci-lint</code>, <code>ci-build</code></li> <li>Environment variables: Use CI-specific variables for dynamic configuration</li> </ul>"},{"location":"guides/cicd/#terminal-naming","title":"Terminal Naming","text":"<ul> <li>Unique names: Always include unique identifiers (run ID, job ID, build number)</li> <li>Descriptive names: Include job type for easier identification: <code>ci-test-123</code>, <code>ci-build-456</code></li> <li>Avoid conflicts: Never reuse terminal names across concurrent runs</li> </ul>"},{"location":"guides/cicd/#artifact-management","title":"Artifact Management","text":"<ul> <li>Upload on failure: Capture logs when tests fail for debugging</li> <li>Set retention: Limit artifact retention to manage storage costs</li> <li>Include metadata: Terminal metadata files contain valuable debugging information</li> <li>Compress if needed: Consider compressing large artifacts</li> </ul>"},{"location":"guides/cicd/#debugging-failed-runs","title":"Debugging Failed Runs","text":"<p>When a CI run fails, you can:</p> <ol> <li>Download artifacts: Terminal logs are available in CI artifacts</li> <li>Inspect logs: Check <code>~/.sbsh/run/terminals/&lt;name&gt;/capture.log</code> for full I/O</li> <li>Check metadata: Review <code>meta.json</code> for terminal state and environment</li> <li>Recreate locally: Use the same profile locally to reproduce issues</li> </ol>"},{"location":"guides/cicd/#common-patterns","title":"Common Patterns","text":"<p>Multi-stage builds:</p> <pre><code>stages:\n  onInit:\n    - script: docker build -t myapp .\n    - script: docker run -d --name test myapp\n    - script: npm run test\n</code></pre> <p>Environment-specific profiles:</p> <pre><code>env:\n  ENVIRONMENT: \"production\"\n  DATABASE_URL: \"${{ secrets.PROD_DATABASE_URL }}\"\n</code></pre> <p>Parallel test execution:</p> <pre><code># GitHub Actions\njobs:\n  test:\n    strategy:\n      matrix:\n        test-suite: [unit, integration, e2e]\n    steps:\n      - run: sbsh -p ci-test-${{ matrix.test-suite }} --name \"ci-${{ github.run_id }}-${{ matrix.test-suite }}\"\n</code></pre>"},{"location":"guides/cicd/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/cicd/#profile-not-found","title":"Profile Not Found","text":"<p>Problem: <code>sbsh</code> says \"profile not found\" in CI</p> <p>Solutions:</p> <ul> <li>Verify profile file path: <code>~/.sbsh/profiles.yaml</code> by default</li> <li>Check profile name matches exactly (case-sensitive)</li> <li>Ensure profile is created before running <code>sbsh -p</code></li> <li>Use <code>sb get profiles</code> to list available profiles</li> </ul>"},{"location":"guides/cicd/#terminal-not-starting","title":"Terminal Not Starting","text":"<p>Problem: Terminal fails to start in CI</p> <p>Solutions:</p> <ul> <li>Check working directory exists: <code>cwd</code> must be valid</li> <li>Verify commands in <code>onInit</code> are available in CI environment</li> <li>Check file permissions and paths</li> <li>Review terminal logs in artifacts</li> </ul>"},{"location":"guides/cicd/#artifacts-not-uploaded","title":"Artifacts Not Uploaded","text":"<p>Problem: Terminal logs not available after CI run</p> <p>Solutions:</p> <ul> <li>Verify artifact paths match terminal name pattern</li> <li>Use <code>when: always</code> (GitLab) or <code>if: always()</code> (GitHub Actions) to capture on success</li> <li>Check artifact retention settings</li> <li>Ensure terminal completed (check exit codes)</li> </ul>"},{"location":"guides/cicd/#environment-variables-not-set","title":"Environment Variables Not Set","text":"<p>Problem: Environment variables not available in terminal</p> <p>Solutions:</p> <ul> <li>Use CI-specific variable syntax: <code>${{ github.workspace }}</code>, <code>$CI_PROJECT_DIR</code>, <code>$WORKSPACE</code></li> <li>Check <code>inheritEnv</code> setting in profile</li> <li>Verify variable expansion in profile YAML</li> <li>Use absolute paths if variable expansion fails</li> </ul>"},{"location":"guides/cicd/#see-also","title":"See Also","text":"<ul> <li>Profiles Guide - Learn how to create and customize profiles</li> </ul>"},{"location":"guides/comparison/","title":"sbsh vs screen and tmux","text":"<p>This document compares sbsh with traditional terminal multiplexers (screen and tmux). While all three provide persistent terminal sessions, they differ in architecture, design goals, and use cases.</p> <p>screen and tmux are terminal multiplexers: they manage multiple terminal sessions within a single process, providing window management and session persistence.</p> <p>sbsh is a terminal supervisor: it treats terminals as independent, managed services with declarative configuration, built-in discovery, and programmatic control. Unlike screen and tmux, sbsh has no central server process\u2014each terminal runs autonomously. sbsh exists to make terminal environments reproducible, shareable, and automatable across teams and CI/CD pipelines.</p>"},{"location":"guides/comparison/#overview","title":"Overview","text":"Aspect screen / tmux sbsh Server Architecture Single server process manages all sessions No central server; each terminal is independent Terminal Process Tied to the terminal multiplexer Independent, runs separately Supervisor Model The multiplexer IS the terminal Separate supervisor and terminal Failure Domain Shared\u2014server crash affects all sessions Isolated\u2014each terminal independent Supervisor Crash Terminal typically dies with supervisor Terminal continues running Configuration Dotfiles (<code>.screenrc</code>, <code>.tmux.conf</code>) Declarative YAML profiles Discovery Manual socket management Built-in discovery by name or ID Reattach from Different Machine Requires shared socket files / setup Built-in discovery, works from anywhere Automation Limited programmatic access RPC API, structured metadata Multi-Attach Requires setup Built-in from the start"},{"location":"guides/comparison/#architecture","title":"Architecture","text":"<p>screen / tmux:</p> <ul> <li>Single server process manages all terminal sessions</li> <li>Sessions are children of the multiplexer process</li> <li>Server process crash can affect all sessions</li> <li>Sessions share the same failure domain</li> <li>Supervisor crash typically terminates the terminal</li> </ul> <p>sbsh:</p> <ul> <li>No central server or daemon process</li> <li>Each terminal runs as an independent process with its own lightweight supervisor</li> <li>Terminals are self-contained with individual lifecycles, logs, and metadata</li> <li>Complete process isolation: one terminal's failure does not affect others</li> <li>Supervisor crash does not affect the terminal; it continues running independently</li> </ul>"},{"location":"guides/comparison/#benefits-of-no-server-architecture","title":"Benefits of No-Server Architecture","text":"<ul> <li>Isolated failure domains: If one supervisor crashes, other terminals continue running</li> <li>True isolation: Each terminal is a standalone process, not a child of a global daemon</li> <li>Simpler integration: Terminals can be created, discovered, or attached to individually</li> <li>Scalability: Run hundreds of terminals without a single point of failure</li> </ul>"},{"location":"guides/comparison/#configuration-and-profiles","title":"Configuration and Profiles","text":"<p>screen / tmux:</p> <ul> <li>Configuration via dotfiles (<code>.screenrc</code>, <code>.tmux.conf</code>)</li> <li>Manual script setup for environments</li> <li>Per-terminal setup requires manual commands</li> <li>Configuration is procedural, not declarative</li> </ul> <p>sbsh:</p> <ul> <li>Profiles: Declarative YAML configuration</li> <li>Pre-configured environments (k8s, terraform, docker, etc.)</li> <li>Lifecycle hooks (onInit, postAttach)</li> <li>Version-controlled, shareable across team members</li> <li>Configuration defines desired state, not execution steps</li> </ul> <p>Example: With sbsh, a Kubernetes profile automatically sets up context and shows cluster status:</p> <pre><code>sbsh -p k8s-default\n# Automatically runs: kubectl config use-context, shows pods, etc.\n</code></pre> <p>With tmux, you'd need custom scripts or manual setup each time.</p>"},{"location":"guides/comparison/#terminal-discovery","title":"Terminal Discovery","text":"<p>screen / tmux:</p> <ul> <li>Manual socket management required</li> <li>List sessions with <code>screen -list</code> or <code>tmux ls</code></li> <li>Reattach requires knowing session name or ID</li> <li>Socket files must be accessible for reattachment</li> </ul> <pre><code># Manual socket management\nscreen -S myterminal\nscreen -list\nscreen -r myterminal\n\n# Or find socket files manually\nls -la /tmp/screen-*/\n</code></pre> <p>sbsh:</p> <ul> <li>Built-in discovery by name or ID</li> <li>Structured metadata directory with full session information</li> <li>Discoverable from any machine with access to the run directory</li> <li>No manual socket file management</li> </ul> <pre><code># Built-in discovery by name or ID\nsb get terminals\nsb attach myterminal\nsb attach abc123\n# Works from any machine, no socket management\n</code></pre> <p>sbsh maintains a metadata directory (<code>~/.sbsh/run/terminals/</code>) with full session information, enabling true session discovery, better observability, and reproducibility across teams.</p>"},{"location":"guides/comparison/#multi-attach","title":"Multi-Attach","text":"<p>screen / tmux:</p> <ul> <li>Both support multiple clients attaching to sessions</li> <li>Requires explicit multi-user mode setup (screen)</li> <li>Or careful socket sharing (tmux)</li> <li>Configuration needed for multi-user scenarios</li> </ul> <p>sbsh:</p> <ul> <li>Built-in multi-attach from the start</li> <li>Multiple supervisors can connect concurrently to the same terminal</li> <li>Designed for collaboration and team workflows</li> <li>No special configuration required</li> </ul>"},{"location":"guides/comparison/#api-and-automation","title":"API and Automation","text":"<p>screen / tmux:</p> <ul> <li>Limited programmatic access</li> <li>Mostly command-line interface</li> <li>Integration requires parsing command output</li> <li>No structured API for automation</li> </ul> <p>sbsh:</p> <ul> <li>RPC API for programmatic control</li> <li>Structured metadata and logs in JSON format</li> <li>Designed for automation and CI/CD integration</li> <li>Better integration with monitoring and orchestration tools</li> <li>Terminal state queryable via API</li> </ul>"},{"location":"guides/comparison/#logging-and-observability","title":"Logging and Observability","text":"<p>screen / tmux:</p> <ul> <li>Basic logging (if configured)</li> <li>Manual log management</li> <li>Limited metadata about sessions</li> <li>No structured logging format</li> </ul> <p>sbsh:</p> <ul> <li>Structured logs for every terminal</li> <li>Complete I/O capture to log files</li> <li>Metadata (status, attachers, lifecycle events) in JSON</li> <li>Built for auditing and debugging</li> <li>Logs stored per-terminal in metadata directory</li> </ul>"},{"location":"guides/comparison/#when-to-use-each","title":"When to Use Each","text":""},{"location":"guides/comparison/#use-screen-tmux-if","title":"Use screen / tmux if:","text":"<ul> <li>You need basic terminal persistence</li> <li>You want window/panel management (tmux)</li> <li>You prefer traditional terminal multiplexing workflows</li> <li>Simple use cases are sufficient</li> <li>You're comfortable with existing tools and workflows</li> </ul>"},{"location":"guides/comparison/#use-sbsh-if","title":"Use sbsh if:","text":"<ul> <li>You work with Kubernetes, Terraform, or infrastructure tools</li> <li>You need terminal discovery across machines</li> <li>You want reproducible environment profiles (Terminal-as-Code)</li> <li>You need API access for automation</li> <li>You want structured logging and metadata</li> <li>Multiple people need to share terminals</li> <li>Terminals must survive supervisor crashes</li> <li>You need isolated failure domains without process dependencies</li> <li>You're running many terminals and need high reliability</li> <li>You want autonomous terminals without a central server dependency</li> <li>You need declarative configuration that can be version-controlled</li> </ul>"},{"location":"guides/comparison/#related-tools","title":"Related Tools","text":"<p>Ansible manages infrastructure provisioning and configuration, while sbsh focuses on developer session reproducibility. Ansible defines and deploys infrastructure state; sbsh defines and manages terminal environments for consistent developer workflows.</p>"},{"location":"guides/comparison/#philosophy","title":"Philosophy","text":"<p>sbsh treats terminals as first-class, independent resources\u2014each with its own lifecycle, configuration, and failure domain. By eliminating the central server model and embracing declarative configuration, sbsh enables reproducible terminal environments that can be version-controlled, shared across teams, and integrated into automated workflows. This design philosophy prioritizes isolation, observability, and automation over traditional multiplexing features.</p>"},{"location":"guides/container/","title":"Container Usage with sbsh","text":"<p>sbsh provides official Docker images for running persistent terminals in containerized environments. Use the pre-built images to quickly deploy sbsh in Docker, Kubernetes, or any container orchestration platform.</p>"},{"location":"guides/container/#key-benefits-for-container-usage","title":"Key Benefits for Container Usage","text":"<ul> <li>Pre-built Images: Ready-to-use Docker images for multiple architectures</li> <li>Persistence: Terminal sessions survive container restarts when volumes are properly configured</li> <li>Isolation: Run sbsh in isolated environments without affecting the host system</li> <li>Portability: Same image works across different container platforms</li> <li>CI/CD Integration: Use containers in CI/CD pipelines for reproducible environments</li> </ul>"},{"location":"guides/container/#pulling-sbsh-images","title":"Pulling sbsh Images","text":"<p>sbsh images are available on Docker Hub at <code>docker.io/eminwux/sbsh</code>. Images are tagged with version and architecture:</p>"},{"location":"guides/container/#amd64-x86_64","title":"AMD64 (x86_64)","text":"<pre><code>docker pull docker.io/eminwux/sbsh:v0.5.0-linux-amd64\n</code></pre>"},{"location":"guides/container/#arm64","title":"ARM64","text":"<pre><code>docker pull docker.io/eminwux/sbsh:v0.5.0-linux-arm64\n</code></pre>"},{"location":"guides/container/#using-docker-hub-short-syntax","title":"Using Docker Hub Short Syntax","text":"<pre><code># AMD64\ndocker pull eminwux/sbsh:v0.5.0-linux-amd64\n\n# ARM64\ndocker pull eminwux/sbsh:v0.5.0-linux-arm64\n</code></pre>"},{"location":"guides/container/#image-architecture","title":"Image Architecture","text":"<p>The sbsh Docker image is built using a multi-stage build process:</p>"},{"location":"guides/container/#build-stage","title":"Build Stage","text":"<ul> <li>Base: <code>golang:1.25-bookworm</code> (builder stage)</li> <li>Build Process: Compiles sbsh binary for the target architecture</li> <li>Build Args: <code>ARCH</code> (amd64/arm64) and <code>OS</code> (linux)</li> </ul>"},{"location":"guides/container/#runtime-stage","title":"Runtime Stage","text":"<ul> <li>Base: <code>debian:bookworm-slim</code> (minimal Debian image)</li> <li>Dependencies: <code>procps</code> package (for process management utilities)</li> <li>Binary: <code>/bin/sbsh</code> and <code>/bin/sb</code> (hard-linked)</li> <li>Default CMD: <code>[\"/bin/sbsh\", \"terminal\"]</code> (runs terminal only by default; can be overridden to use <code>CMD [\"/bin/sbsh\"]</code> for supervisor+terminal)</li> </ul>"},{"location":"guides/container/#image-structure","title":"Image Structure","text":"<pre><code>/bin/sbsh          # Main sbsh binary\n/bin/sb            # Hard link to sbsh (client tool)\n</code></pre>"},{"location":"guides/container/#choosing-the-right-cmd","title":"Choosing the Right CMD","text":"<p>The sbsh Docker image supports two different CMD options depending on your use case:</p>"},{"location":"guides/container/#cmd-binsbsh-supervisor-terminal-interactive","title":"<code>CMD [\"/bin/sbsh\"]</code> - Supervisor + Terminal (Interactive)","text":"<p>Runs a supervisor attached to a terminal. This is the default behavior when using <code>sbsh</code> interactively:</p> <ul> <li>Supervisor: Manages the terminal and stays attached</li> <li>Terminal: Interactive shell session</li> <li>Use case: Interactive development, debugging, login shells</li> <li>Behavior: You interact directly with the terminal; supervisor stays attached</li> </ul> <p>Example Dockerfile:</p> <pre><code>FROM docker.io/eminwux/sbsh:v0.5.0-linux-amd64\nCMD [\"/bin/sbsh\"]\n</code></pre> <p>When to use:</p> <ul> <li>Interactive containers where you need to attach and detach</li> <li>Login shell scenarios</li> <li>Development environments where you want direct terminal access</li> <li>When you need the supervisor to manage the terminal lifecycle</li> </ul>"},{"location":"guides/container/#cmd-binsbsh-terminal-terminal-only","title":"<code>CMD [\"/bin/sbsh\", \"terminal\"]</code> - Terminal Only","text":"<p>Runs just a terminal without a supervisor. The supervisor is launched externally when you attach:</p> <ul> <li>Supervisor: Not running initially; launched when you execute <code>sb attach &lt;name&gt;</code> from outside</li> <li>Terminal: Independent terminal session that runs on its own</li> <li>Use case: Background services, automation, CI/CD pipelines</li> <li>Behavior: Terminal runs independently; supervisor is created when you attach via <code>sb attach</code></li> <li>Important: Always use <code>--name &lt;name&gt;</code> with <code>sbsh terminal</code> to identify the terminal for later attachment</li> </ul> <p>Example Dockerfile:</p> <pre><code>FROM docker.io/eminwux/sbsh:v0.5.0-linux-amd64\nCMD [\"/bin/sbsh\", \"terminal\", \"--name\", \"my-terminal\"]\n</code></pre> <p>When to use:</p> <ul> <li>Background terminals that need to persist</li> <li>Automation and CI/CD pipelines</li> <li>Services that should run detached</li> <li>When terminals need to survive supervisor restarts</li> <li>When you want to attach to the terminal later from outside the container</li> </ul> <p>Attaching to the terminal:</p> <pre><code># From outside the container (if you have sb installed):\nsb attach my-terminal\n\n# Or from within the container:\ndocker exec -it &lt;container&gt; sb attach my-terminal\n</code></pre>"},{"location":"guides/container/#comparison","title":"Comparison","text":"Feature <code>CMD [\"/bin/sbsh\"]</code> <code>CMD [\"/bin/sbsh\", \"terminal\"]</code> Supervisor Launched and attached Not running initially; launched when you attach Terminal Managed by supervisor Independent, runs on its own Use case Interactive development Background services Detach Press <code>Ctrl-]</code> twice No supervisor attached initially Attach Already attached Launch supervisor with <code>sb attach &lt;name&gt;</code> Name required Optional Required (use <code>--name</code>)"},{"location":"guides/container/#basic-usage","title":"Basic Usage","text":""},{"location":"guides/container/#running-sbsh-interactively","title":"Running sbsh Interactively","text":"<p>Run sbsh with an attached supervisor and terminal:</p> <pre><code>docker run -it --rm \\\n  -v ~/.sbsh:/root/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sbsh\n</code></pre> <p>Key Points:</p> <ul> <li><code>-v ~/.sbsh:/root/.sbsh</code>: Mounts your local sbsh directory to persist terminals and metadata</li> <li><code>-it</code>: Interactive terminal mode</li> <li><code>--rm</code>: Remove container when it exits (optional)</li> <li>Default user is <code>root</code>; adjust paths if using a different user</li> </ul>"},{"location":"guides/container/#running-a-detached-terminal","title":"Running a Detached Terminal","text":"<p>Launch a terminal that runs independently (no supervisor initially). Important: Always use <code>--name</code> to identify the terminal:</p> <pre><code>docker run -d \\\n  --name my-sbsh-terminal \\\n  -v ~/.sbsh:/root/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sbsh terminal --name my-terminal\n</code></pre> <p>The terminal runs independently. A supervisor is not running initially - it will be launched when you attach via <code>sb attach</code>.</p>"},{"location":"guides/container/#attaching-to-a-running-terminal","title":"Attaching to a Running Terminal","text":"<p>Use the <code>sb</code> client to attach to a terminal running in a container:</p> <pre><code>docker exec -it my-sbsh-terminal sb attach my-terminal\n</code></pre> <p>Or from the host, if you have <code>sb</code> installed locally:</p> <pre><code>sb attach my-terminal\n</code></pre> <p>This works because the <code>~/.sbsh</code> volume is shared between the container and host.</p>"},{"location":"guides/container/#volume-requirements","title":"Volume Requirements","text":"<p>sbsh requires persistent storage for terminal metadata, sockets, and logs. Mount the <code>~/.sbsh</code> directory as a volume:</p>"},{"location":"guides/container/#volume-mount","title":"Volume Mount","text":"<pre><code>-v ~/.sbsh:/root/.sbsh\n</code></pre>"},{"location":"guides/container/#what-gets-stored","title":"What Gets Stored","text":"<p>The <code>~/.sbsh</code> directory contains:</p> <ul> <li><code>~/.sbsh/run/terminals/</code>: Terminal metadata and socket files</li> <li><code>~/.sbsh/run/supervisors/</code>: Supervisor metadata</li> <li><code>~/.sbsh/profiles.yaml</code>: Profile definitions (optional)</li> </ul>"},{"location":"guides/container/#using-named-volumes","title":"Using Named Volumes","text":"<p>For better Docker management, use named volumes:</p> <pre><code>docker volume create sbsh-data\n\ndocker run -it --rm \\\n  -v sbsh-data:/root/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sbsh\n</code></pre>"},{"location":"guides/container/#using-bind-mounts","title":"Using Bind Mounts","text":"<p>For direct access to files from the host:</p> <pre><code>docker run -it --rm \\\n  -v /home/user/.sbsh:/root/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sbsh\n</code></pre>"},{"location":"guides/container/#running-sbsh-commands","title":"Running sbsh Commands","text":""},{"location":"guides/container/#interactive-mode-sbsh","title":"Interactive Mode (<code>sbsh</code>)","text":"<p>Launch a supervisor with an attached terminal:</p> <pre><code>docker run -it --rm \\\n  -v ~/.sbsh:/root/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sbsh -p terraform-prd\n</code></pre>"},{"location":"guides/container/#detached-terminal-sbsh-terminal","title":"Detached Terminal (<code>sbsh terminal</code>)","text":"<p>Create a terminal that runs independently:</p> <pre><code>docker run -d \\\n  --name terraform-terminal \\\n  -v ~/.sbsh:/root/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sbsh terminal --name terraform-prd -p terraform-prd\n</code></pre>"},{"location":"guides/container/#client-commands-sb","title":"Client Commands (<code>sb</code>)","text":"<p>List terminals, attach, or manage sessions:</p> <pre><code># List terminals\ndocker run --rm \\\n  -v ~/.sbsh:/root/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sb get terminals\n\n# Attach to a terminal\ndocker run -it --rm \\\n  -v ~/.sbsh:/root/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sb attach my-terminal\n\n# List profiles\ndocker run --rm \\\n  -v ~/.sbsh:/root/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sb get profiles\n</code></pre>"},{"location":"guides/container/#using-sbsh-as-a-base-image","title":"Using sbsh as a Base Image","text":"<p>You can use the sbsh image as a base for custom Dockerfiles:</p>"},{"location":"guides/container/#example-1-interactive-development-environment-supervisor-terminal","title":"Example 1: Interactive Development Environment (Supervisor + Terminal)","text":"<p>Use <code>CMD [\"/bin/sbsh\"]</code> for interactive development where you want the supervisor attached:</p> <pre><code>FROM docker.io/eminwux/sbsh:v0.5.0-linux-amd64\n\n# Install additional tools\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    git \\\n    vim \\\n    curl \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# Copy custom profiles\nCOPY profiles.yaml /root/.sbsh/profiles.yaml\n\n# Set working directory\nWORKDIR /workspace\n\n# Run supervisor + terminal (interactive)\nCMD [\"/bin/sbsh\"]\n</code></pre> <p>Building and Running:</p> <pre><code>docker build -t my-sbsh-env .\ndocker run -it --rm \\\n  -v ~/.sbsh:/root/.sbsh \\\n  -v $(pwd):/workspace \\\n  my-sbsh-env\n</code></pre> <p>This runs an interactive terminal with an attached supervisor. Press <code>Ctrl-]</code> twice to detach.</p>"},{"location":"guides/container/#example-2-background-terminal-service-terminal-only","title":"Example 2: Background Terminal Service (Terminal Only)","text":"<p>Use <code>CMD [\"/bin/sbsh\", \"terminal\"]</code> for background terminals that run independently. Important: Always specify <code>--name</code> to identify the terminal for later attachment:</p> <pre><code>FROM docker.io/eminwux/sbsh:v0.5.0-linux-amd64\n\n# Install additional tools\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    git \\\n    curl \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# Copy custom profiles\nCOPY profiles.yaml /root/.sbsh/profiles.yaml\n\n# Set working directory\nWORKDIR /workspace\n\n# Run terminal only (no supervisor initially)\n# The supervisor will be launched when you attach via sb attach\nCMD [\"/bin/sbsh\", \"terminal\", \"--name\", \"background-terminal\", \"-p\", \"default\"]\n</code></pre> <p>Building and Running:</p> <pre><code>docker build -t my-sbsh-background .\ndocker run -d \\\n  --name my-terminal-service \\\n  -v ~/.sbsh:/root/.sbsh \\\n  my-sbsh-background\n\n# Attach later - this launches a supervisor to connect to the terminal:\ndocker exec -it my-terminal-service sb attach background-terminal\n# Or from host (if sb is installed):\nsb attach background-terminal\n</code></pre> <p>This runs a terminal that continues independently. The supervisor is not running initially - it's launched when you execute <code>sb attach background-terminal</code>, which creates a supervisor to connect to the existing terminal.</p>"},{"location":"guides/container/#docker-compose-example","title":"Docker Compose Example","text":"<p>Use Docker Compose for easier management:</p> <pre><code>version: \"3.8\"\n\nservices:\n  sbsh:\n    image: docker.io/eminwux/sbsh:v0.5.0-linux-amd64\n    container_name: sbsh\n    volumes:\n      - ~/.sbsh:/root/.sbsh\n      - ./workspace:/workspace\n    stdin_open: true\n    tty: true\n    command: sbsh -p default\n    environment:\n      - TERM=xterm-256color\n</code></pre> <p>Run with:</p> <pre><code>docker-compose up\n</code></pre>"},{"location":"guides/container/#multi-architecture-support","title":"Multi-Architecture Support","text":"<p>sbsh images are available for multiple architectures:</p> <ul> <li>linux/amd64: x86_64 processors (Intel, AMD)</li> <li>linux/arm64: ARM64 processors (Apple Silicon, AWS Graviton, etc.)</li> </ul>"},{"location":"guides/container/#platform-specific-pulls","title":"Platform-Specific Pulls","text":"<p>Docker automatically selects the correct image for your platform:</p> <pre><code>docker pull eminwux/sbsh:v0.5.0-linux-amd64\ndocker pull eminwux/sbsh:v0.5.0-linux-arm64\n</code></pre>"},{"location":"guides/container/#using-docker-buildx","title":"Using Docker Buildx","text":"<p>For multi-architecture builds, use Docker Buildx:</p> <pre><code>docker buildx create --use\ndocker buildx build --platform linux/amd64,linux/arm64 \\\n  -t eminwux/sbsh:v0.5.0 \\\n  --push .\n</code></pre>"},{"location":"guides/container/#docker-in-docker-dind","title":"Docker-in-Docker (DinD)","text":"<p>If you need to run Docker commands inside sbsh containers, you can use Docker-in-Docker:</p>"},{"location":"guides/container/#using-docker-socket","title":"Using Docker Socket","text":"<pre><code>docker run -it --rm \\\n  -v ~/.sbsh:/root/.sbsh \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sbsh\n</code></pre> <p>Then install Docker client inside the container or use a profile that includes it.</p>"},{"location":"guides/container/#using-dind-container","title":"Using DinD Container","text":"<pre><code>docker run -it --rm \\\n  -v ~/.sbsh:/root/.sbsh \\\n  --privileged \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sbsh\n</code></pre> <p>Security Note: Using <code>--privileged</code> or mounting the Docker socket grants extensive permissions. Use with caution in production environments.</p>"},{"location":"guides/container/#kubernetes-integration","title":"Kubernetes Integration","text":""},{"location":"guides/container/#deployment-example","title":"Deployment Example","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: sbsh\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: sbsh\n  template:\n    metadata:\n      labels:\n        app: sbsh\n    spec:\n      containers:\n        - name: sbsh\n          image: docker.io/eminwux/sbsh:v0.5.0-linux-amd64\n          command: [\"/bin/sbsh\", \"terminal\", \"--name\", \"k8s-terminal\"]\n          volumeMounts:\n            - name: sbsh-data\n              mountPath: /root/.sbsh\n          stdin: true\n          tty: true\n      volumes:\n        - name: sbsh-data\n          persistentVolumeClaim:\n            claimName: sbsh-pvc\n</code></pre>"},{"location":"guides/container/#persistent-volume-claim","title":"Persistent Volume Claim","text":"<pre><code>apiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: sbsh-pvc\nspec:\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: 1Gi\n</code></pre>"},{"location":"guides/container/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/container/#permission-denied-errors","title":"Permission Denied Errors","text":"<p>Problem: Cannot write to <code>~/.sbsh</code> directory</p> <p>Solutions:</p> <ul> <li>Check volume mount permissions</li> <li>Ensure directory exists: <code>mkdir -p ~/.sbsh</code></li> <li>Use <code>--user</code> flag if running as non-root:   <pre><code>docker run -it --rm \\\n  --user $(id -u):$(id -g) \\\n  -v ~/.sbsh:/home/user/.sbsh \\\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 \\\n  sbsh\n</code></pre></li> </ul>"},{"location":"guides/container/#terminals-not-persisting","title":"Terminals Not Persisting","text":"<p>Problem: Terminals disappear after container restart</p> <p>Solutions:</p> <ul> <li>Verify volume mount is correct: <code>docker inspect &lt;container&gt; | grep Mounts</code></li> <li>Check that <code>~/.sbsh</code> directory is mounted as a volume</li> <li>Ensure volume is not using <code>--tmpfs</code> or ephemeral storage</li> <li>Use named volumes or bind mounts, not temporary filesystems</li> </ul>"},{"location":"guides/container/#socket-connection-errors","title":"Socket Connection Errors","text":"<p>Problem: Cannot connect to terminal sockets</p> <p>Solutions:</p> <ul> <li>Verify sockets are accessible: <code>ls -la ~/.sbsh/run/terminals/*/socket</code></li> <li>Check socket file permissions</li> <li>Ensure volume is shared between containers if using multi-container setup</li> <li>Verify network mode allows Unix socket access</li> </ul>"},{"location":"guides/container/#profile-not-found","title":"Profile Not Found","text":"<p>Problem: Profile not available in container</p> <p>Solutions:</p> <ul> <li>Mount profile file: <code>-v ~/.sbsh/profiles.yaml:/root/.sbsh/profiles.yaml</code></li> <li>Copy profile during image build (if using as base image)</li> <li>Verify profile path in container: <code>/root/.sbsh/profiles.yaml</code></li> <li>Use <code>sb get profiles</code> to list available profiles</li> </ul>"},{"location":"guides/container/#architecture-mismatch","title":"Architecture Mismatch","text":"<p>Problem: Image won't run on host architecture</p> <p>Solutions:</p> <ul> <li>Pull the correct architecture image:</li> <li>AMD64: <code>docker.io/eminwux/sbsh:v0.5.0-linux-amd64</code></li> <li>ARM64: <code>docker.io/eminwux/sbsh:v0.5.0-linux-arm64</code></li> <li>Use <code>docker manifest inspect</code> to check available architectures</li> <li>Verify host architecture: <code>uname -m</code></li> </ul>"},{"location":"guides/container/#container-exits-immediately","title":"Container Exits Immediately","text":"<p>Problem: Container starts and immediately exits</p> <p>Solutions:</p> <ul> <li>Use <code>-it</code> flags for interactive mode</li> <li>Check logs: <code>docker logs &lt;container&gt;</code></li> <li>Verify command syntax</li> <li>Ensure CMD is appropriate for your use case</li> </ul>"},{"location":"guides/container/#best-practices","title":"Best Practices","text":"<ol> <li>Use Named Volumes: For production, use named volumes instead of bind mounts for better portability</li> <li>Version Pinning: Always pin to specific version tags (e.g., <code>v0.5.0-linux-amd64</code>) instead of <code>latest</code></li> <li>Profile Management: Store profiles in version control and mount them as volumes</li> <li>Resource Limits: Set appropriate CPU and memory limits for containers</li> <li>Security: Avoid using <code>--privileged</code> unless absolutely necessary</li> <li>Backup: Regularly backup <code>~/.sbsh</code> volumes for important terminal sessions</li> <li>Multi-Container: Use Docker Compose for complex setups with multiple services</li> </ol>"},{"location":"guides/container/#see-also","title":"See Also","text":"<ul> <li>Profiles Documentation - Learn how to create and customize profiles</li> <li>CI/CD Integration - Using sbsh in CI/CD pipelines</li> </ul>"},{"location":"guides/profiles/","title":"Terminal Profiles for sbsh","text":"<p>Profiles define how sbsh starts and manages terminals. They let you customize the command, environment, working directory, and lifecycle hooks for your terminals.</p>"},{"location":"guides/profiles/#quick-start","title":"Quick Start","text":""},{"location":"guides/profiles/#where-to-put-your-profiles","title":"Where to put your profiles","text":"<p>sbsh looks for profiles in <code>$HOME/.sbsh/profiles.yaml</code> by default. You can also specify a different file using:</p> <ul> <li>Environment variable: <code>SBSH_PROFILES_FILE=/path/to/profiles.yaml</code></li> <li>Command flag: <code>sbsh --profiles-file /path/to/profiles.yaml</code></li> </ul>"},{"location":"guides/profiles/#create-your-first-profile","title":"Create your first profile","text":"<ol> <li>Create the profiles directory (if it doesn't exist):</li> </ol> <pre><code>mkdir -p ~/.sbsh\n</code></pre> <ol> <li>Copy example profiles to get started:</li> </ol> <pre><code># Copy the combined profiles file\n# Copy example profiles from the repository\ncp &lt;repository-root&gt;/docs/profiles/profiles.yaml ~/.sbsh/profiles.yaml\n\n# Or combine individual example files (provided for reference)\ncat &lt;repository-root&gt;/docs/profiles/*.yaml &gt; ~/.sbsh/profiles.yaml\n</code></pre> <p>Note: sbsh only supports a single <code>profiles.yaml</code> file. The individual <code>.yaml</code> files in the repository's <code>docs/profiles/</code> directory are provided as reference examples, but you must combine them into one file for use.</p> <ol> <li>Edit <code>~/.sbsh/profiles.yaml</code> and add your own profiles.</li> </ol>"},{"location":"guides/profiles/#minimal-example","title":"Minimal example","text":"<p>Here's the simplest profile you can create:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: my-terminal\nspec:\n  runTarget: local\n  restartPolicy: exit\n  shell:\n    cmd: /bin/bash\n</code></pre> <p>To use it, run:</p> <pre><code>sbsh -p my-terminal\n</code></pre> <p>That's it! This will start a bash terminal with default settings.</p>"},{"location":"guides/profiles/#profile-structure","title":"Profile Structure","text":"<p>Each profile is a YAML document (multiple profiles are separated by <code>---</code>). Here's the complete structure:</p> <pre><code>apiVersion: sbsh/v1beta1 # Always use this version\nkind: TerminalProfile # Always use this kind\nmetadata:\n  name: profile-name # Your profile identifier\nspec:\n  runTarget: local # Where to run (currently only \"local\")\n  restartPolicy: exit # What happens on exit\n  shell: # The command and environment\n    cwd: \"~\" # Working directory\n    cmd: /bin/bash # Command to run\n    cmdArgs: [] # Arguments for the command\n    inheritEnv: true # Inherit parent environment?\n    env: # Environment variables\n      KEY: value\n    prompt: \"custom prompt\" # Shell prompt (optional)\n  stages: # Lifecycle hooks (optional)\n    onInit: # Run before starting\n      - script: echo \"Starting...\"\n    postAttach: # Run after attaching\n      - script: echo \"Attached!\"\n</code></pre>"},{"location":"guides/profiles/#field-reference","title":"Field Reference","text":""},{"location":"guides/profiles/#required-fields","title":"Required fields","text":"<ul> <li><code>metadata.name</code>: A unique identifier for this profile. Use it with <code>sbsh -p &lt;name&gt;</code> to start a terminal.</li> </ul>"},{"location":"guides/profiles/#spec-fields","title":"spec fields","text":""},{"location":"guides/profiles/#runtarget","title":"<code>runTarget</code>","text":"<p>Where the terminal runs. Currently only <code>local</code> is supported.</p>"},{"location":"guides/profiles/#restartpolicy","title":"<code>restartPolicy</code>","text":"<p>Controls what happens when the terminal exits:</p> <ul> <li><code>exit</code>: Don't restart \u2014 terminal terminates (default for most use cases)</li> <li><code>restart-on-error</code>: Only restart if the process exits with a non-zero code</li> <li><code>restart-unlimited</code>: Always restart the terminal when it exits</li> </ul> <p>When to use each:</p> <ul> <li>Use <code>exit</code> for SSH terminals, container shells, or when you want the terminal to stay dead after it exits</li> <li>Use <code>restart-on-error</code> for persistent services or when you want automatic recovery from crashes</li> <li>Use <code>restart-unlimited</code> for services that should always be running</li> </ul>"},{"location":"guides/profiles/#shell-section","title":"<code>shell</code> section","text":"<p>Defines the command and environment for your terminal.</p> <p><code>cwd</code> (optional)</p> <ul> <li>Working directory where the terminal starts</li> <li>Use <code>~</code> for home directory (expands to <code>$HOME</code>)</li> <li>Use <code>$HOME/path</code> for paths relative to home</li> <li>Use absolute paths like <code>/tmp</code> for specific directories</li> </ul> <p><code>cmd</code> (required)</p> <ul> <li>Full path to the command or shell to execute</li> <li>Examples: <code>/bin/bash</code>, <code>/usr/bin/zsh</code>, <code>/usr/bin/ssh</code>, <code>/usr/bin/docker</code></li> </ul> <p><code>cmdArgs</code> (optional)</p> <ul> <li>Array of arguments passed to <code>cmd</code></li> <li>Example: <code>[\"--norc\", \"--noprofile\"]</code> for bash</li> <li>Example: <code>[\"-t\", \"remote-host\"]</code> for ssh</li> <li>Example: <code>[\"run\", \"--rm\", \"-ti\", \"ubuntu:latest\"]</code> for docker</li> </ul> <p><code>inheritEnv</code> (optional, default: <code>true</code>)</p> <ul> <li>When <code>true</code>: terminal inherits all environment variables from the parent process</li> <li>When <code>false</code>: terminal starts with a minimal environment; only variables you specify in <code>env</code> are available</li> <li>Use <code>false</code> for reproducible, isolated environments</li> <li>Use <code>true</code> when you want access to your full environment (PATH, SSH_AUTH_SOCK, etc.)</li> </ul> <p><code>env</code> (optional)</p> <ul> <li>Key-value map of environment variables</li> <li>Values can reference other variables: <code>PATH: \"$HOME/bin:$PATH\"</code></li> <li>Numbers should be quoted as strings: <code>HISTSIZE: \"5000\"</code></li> </ul> <p><code>prompt</code> (optional)</p> <ul> <li>Custom shell prompt string</li> <li>Useful for identifying which profile you're using</li> <li>Supports shell escape sequences and sbsh variables:</li> <li><code>$SBSH_TERM_ID</code>: Current terminal ID</li> <li><code>$SBSH_TERM_PROFILE</code>: Current profile name</li> <li>Quoting in YAML: Complex prompts with escape sequences need careful quoting</li> <li>Single quotes: <code>prompt: '\"\\[\\e[1;31m\\]...\\[\\e[0m\\]\" '</code></li> <li>Double quotes with escapes: <code>prompt: \"\\\"[sbsh-$SBSH_TERM_ID] \\\\u@\\\\h:\\\\w$ \\\"\"</code></li> </ul>"},{"location":"guides/profiles/#stages-section-optional","title":"<code>stages</code> section (optional)","text":"<p>Lifecycle hooks that run at specific points in the terminal lifecycle.</p> <p><code>onInit</code></p> <ul> <li>List of commands that run before the main <code>cmd</code> starts</li> <li>Runs in sequence; if one fails, subsequent commands may not run</li> <li>Common uses:</li> <li>Authenticating or configuring tools (<code>kubectl config use-context</code>)</li> <li>Initializing environments (<code>terraform init</code>)</li> <li>Setting up project state</li> <li>Each step is a script command:   <pre><code>onInit:\n  - script: kubectl config use-context production\n  - script: terraform workspace select prod\n</code></pre></li> </ul> <p><code>postAttach</code></p> <ul> <li>List of commands that run after you attach to the terminal</li> <li>Useful for showing status or context when you reconnect</li> <li>Common uses:</li> <li>Showing current state (<code>kubectl get pods</code>)</li> <li>Displaying project status</li> <li>Running health checks   <pre><code>postAttach:\n  - script: kubectl get pods\n  - script: git status\n</code></pre></li> </ul>"},{"location":"guides/profiles/#example-profiles","title":"Example Profiles","text":"<p>This directory contains example profiles. The individual <code>.yaml</code> files are provided for reference, but sbsh only supports a single <code>profiles.yaml</code> file. All profiles must be combined into one file with <code>---</code> separators between documents.</p>"},{"location":"guides/profiles/#profile-examples-index","title":"Profile Examples Index","text":"Profile Description File Section <code>default</code> Minimal bash terminal with clean environment <code>default.yaml</code> Section 1 <code>zsh</code> Minimal zsh terminal with clean environment <code>zsh.yaml</code> Section 2 <code>k8s-default</code> Kubernetes development terminal with kubectl context setup <code>k8s-default.yaml</code> Section 3 <code>terraform-prd</code> Terraform production workspace with environment variables <code>terraform-prd.yaml</code> Section 4 <code>k8s-pod</code> Ephemeral Kubernetes pod shell for debugging <code>k8s-pod.yaml</code> Section 5 <code>docker-container</code> Docker container shell for containerized workflows <code>docker-container.yaml</code> Section 6 <code>ssh-pk</code> SSH remote host connection with persistent sessions <code>ssh-pk.yaml</code> Section 7 <code>python-venv</code> Python virtual environment with automatic activation <code>python-venv.yaml</code> Section 8 <code>npm-dev</code> Node.js/npm development environment with dependency management <code>npm-dev.yaml</code> Section 9 <code>go-dev</code> Go/Golang development environment with module support <code>go-dev.yaml</code> Section 10 <code>ci-test</code> CI/CD test environment for local testing that mirrors CI <code>ci-test.yaml</code> Section 11 <code>terraform-dev</code> Terraform development workspace with environment variables <code>terraform-dev.yaml</code> Section 12 <code>terraform-staging</code> Terraform staging workspace with environment variables <code>terraform-staging.yaml</code> Section 13 <code>postgres</code> PostgreSQL database shell for database operations and debugging <code>postgres.yaml</code> Section 14 <code>aws-cli</code> AWS CLI environment for infrastructure management <code>aws-cli.yaml</code> Section 15 <code>docker-compose</code> Docker Compose development environment for multi-service setups <code>docker-compose.yaml</code> Section 16 <code>redis</code> Redis CLI for database operations and debugging <code>redis.yaml</code> Section 17 <code>rust-dev</code> Rust development environment with toolchain setup <code>rust-dev.yaml</code> Section 18 <code>mysql</code> MySQL database shell for database operations and debugging <code>mysql.yaml</code> Section 19 <code>mongo</code> MongoDB database shell for database operations and debugging <code>mongo.yaml</code> Section 20 <p>All profiles are also available in <code>profiles.yaml</code> as a combined file ready to use.</p> <p>To use these profiles:</p> <pre><code># Copy the combined file\ncp docs/profiles/profiles.yaml ~/.sbsh/profiles.yaml\n\n# Or copy specific example files and combine them\ncat docs/profiles/default.yaml docs/profiles/python-venv.yaml &gt; ~/.sbsh/profiles.yaml\n</code></pre>"},{"location":"guides/profiles/#example-profiles-explained","title":"Example Profiles Explained","text":""},{"location":"guides/profiles/#1-default-minimal-bash-terminal","title":"1. <code>default</code> - Minimal bash terminal","text":"<p>See <code>default.yaml</code> for the complete profile.</p> <p>A clean bash terminal with minimal environment variables:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: default\nspec:\n  runTarget: local\n  restartPolicy: restart-on-error\n  shell:\n    cwd: \"~\"\n    cmd: /bin/bash\n    cmdArgs: [\"--norc\", \"--noprofile\"] # Start with a clean bash\n    inheritEnv: false # Don't inherit parent env\n    env:\n      LANG: en_US.UTF-8\n      EDITOR: vim\n      HISTSIZE: \"5000\"\n    prompt: \"\\\"[sbsh-$SBSH_TERM_ID] \\\\u@\\\\h:\\\\w$ \\\"\"\n</code></pre> <p>Key points:</p> <ul> <li><code>inheritEnv: false</code> creates a minimal, reproducible environment</li> <li><code>--norc --noprofile</code> prevents bash from loading your <code>.bashrc</code></li> <li>Custom prompt shows the terminal ID so you know which sbsh terminal you're in</li> </ul>"},{"location":"guides/profiles/#2-zsh-minimal-zsh-terminal","title":"2. <code>zsh</code> - Minimal zsh terminal","text":"<p>See <code>zsh.yaml</code> for the complete profile.</p> <p>A clean zsh terminal with minimal environment variables, similar to the default bash profile but using zsh:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: zsh\nspec:\n  runTarget: local\n  restartPolicy: restart-on-error\n  shell:\n    cwd: \"~\"\n    cmd: /bin/zsh\n    cmdArgs: [\"-f\"] # Start with a clean zsh (skip startup files)\n    inheritEnv: false # Don't inherit parent env\n    env:\n      LANG: en_US.UTF-8\n      EDITOR: vim\n      HISTSIZE: \"5000\"\n    prompt: '\"[sbsh-$SBSH_TERM_ID] %n@%m:%~$ \"'\n</code></pre> <p>Key points:</p> <ul> <li><code>inheritEnv: false</code> creates a minimal, reproducible environment</li> <li><code>-f</code> flag prevents zsh from loading startup files (<code>.zshrc</code>, <code>.zshenv</code>, etc.)</li> <li>Custom prompt uses zsh format (<code>%n@%m:%~$</code>) instead of bash format (<code>\\u@\\h:\\w$</code>)</li> <li><code>%n</code> is username, <code>%m</code> is hostname, <code>%~</code> is current directory in zsh prompt format</li> </ul>"},{"location":"guides/profiles/#3-k8s-default-kubernetes-development-terminal","title":"3. <code>k8s-default</code> - Kubernetes development terminal","text":"<p>See <code>k8s-default.yaml</code> for the complete profile.</p> <p>Sets up kubectl context and shows cluster info on attach.</p> <p>Key points:</p> <ul> <li><code>onInit</code> sets up the kubectl context before the shell starts</li> <li><code>postAttach</code> shows cluster status when you reconnect</li> <li>Colored prompt distinguishes this profile from others</li> </ul>"},{"location":"guides/profiles/#4-terraform-prd-terraform-production-workspace","title":"4. <code>terraform-prd</code> - Terraform production workspace","text":"<p>See <code>terraform-prd.yaml</code> for the complete profile.</p> <p>Prepares a Terraform workspace and runs planning.</p> <p>Key points:</p> <ul> <li><code>restartPolicy: exit</code> prevents accidental restarts in production</li> <li><code>onInit</code> prepares the Terraform workspace before you start working</li> <li>Environment variable <code>TF_VAR_environment</code> is available to Terraform</li> </ul>"},{"location":"guides/profiles/#5-k8s-pod-ephemeral-kubernetes-pod-shell","title":"5. <code>k8s-pod</code> - Ephemeral Kubernetes pod shell","text":"<p>See <code>k8s-pod.yaml</code> for the complete profile.</p> <p>Creates a temporary Kubernetes pod and drops you into a shell.</p> <p>Key points:</p> <ul> <li>Uses <code>kubectl run</code> to create an ephemeral pod</li> <li><code>--rm</code> removes the pod when it exits</li> <li><code>-ti</code> allocates a pseudo-TTY and keeps STDIN open</li> </ul>"},{"location":"guides/profiles/#6-docker-container-ephemeral-container-shell","title":"6. <code>docker-container</code> - Ephemeral container shell","text":"<p>See <code>docker-container.yaml</code> for the complete profile.</p> <p>Starts a temporary Docker container and drops you into a shell.</p> <p>Key points:</p> <ul> <li><code>cmd</code> is <code>docker</code>, not a shell</li> <li><code>cmdArgs</code> contains all the docker arguments</li> <li><code>--rm</code> removes the container when it exits</li> <li><code>-ti</code> allocates a pseudo-TTY and keeps STDIN open</li> </ul>"},{"location":"guides/profiles/#7-ssh-pk-ssh-to-remote-host","title":"7. <code>ssh-pk</code> - SSH to remote host","text":"<p>See <code>ssh-pk.yaml</code> for the complete profile.</p> <p>Connects to a remote host using SSH.</p> <p>Key points:</p> <ul> <li><code>cmd</code> is <code>ssh</code></li> <li><code>cmdArgs</code> contains SSH options and the host alias/name</li> <li><code>-t</code> forces pseudo-TTY allocation (needed for interactive shells)</li> </ul>"},{"location":"guides/profiles/#8-python-venv-python-virtual-environment","title":"8. <code>python-venv</code> - Python virtual environment","text":"<p>See <code>python-venv.yaml</code> for the complete profile.</p> <p>Sets up a Python development environment with virtual environment activation. Teams can share this profile to ensure everyone uses the same Python environment for local development.</p> <p>Key points:</p> <ul> <li><code>onInit</code> creates a virtual environment if it doesn't exist, then activates it</li> <li>Sets <code>PYTHONPATH</code> to include the project directory</li> <li><code>postAttach</code> reactivates the venv and shows Python/pip versions when reconnecting</li> <li>Uses yellow-colored prompt to distinguish Python environments</li> <li><code>inheritEnv: true</code> allows PATH and other tools to work correctly</li> <li>Teams can customize the <code>cwd</code> path to match their project location</li> </ul> <p>Customization:</p> <ul> <li>Update <code>cwd</code> to point to your project directory</li> <li>Adjust <code>venv</code> directory name if your team uses a different convention (e.g., <code>.venv</code>, <code>env</code>)</li> <li>Add additional environment variables or setup steps as needed</li> </ul>"},{"location":"guides/profiles/#9-npm-dev-nodejsnpm-development-environment","title":"9. <code>npm-dev</code> - Node.js/npm development environment","text":"<p>See <code>npm-dev.yaml</code> for the complete profile.</p> <p>Sets up a Node.js development environment with dependency installation. Teams can share this profile to ensure consistent Node.js environment setup across team members.</p> <p>Key points:</p> <ul> <li><code>onInit</code> checks Node/npm versions and installs dependencies if <code>node_modules</code> doesn't exist</li> <li>Sets <code>NODE_ENV=development</code> for proper development mode</li> <li><code>postAttach</code> shows Node/npm versions and project name when reconnecting</li> <li>Uses cyan-colored prompt to distinguish Node.js environments</li> <li><code>inheritEnv: true</code> allows PATH and npm/node binaries to work correctly</li> <li>Teams can customize the <code>cwd</code> path to match their project location</li> </ul> <p>Customization:</p> <ul> <li>Update <code>cwd</code> to point to your project directory</li> <li>Modify <code>npm install</code> command if you use different package managers (yarn, pnpm) or need additional flags</li> <li>Add environment variables for API keys, database URLs, or other configuration</li> <li>Adjust lifecycle hooks to run tests, linting, or other setup steps</li> </ul>"},{"location":"guides/profiles/#10-go-dev-gogolang-development","title":"10. <code>go-dev</code> - Go/Golang development","text":"<p>See <code>go-dev.yaml</code> for the complete profile.</p> <p>Sets up a Go development environment with module support. Teams can share this profile to ensure consistent Go environment setup across team members.</p> <p>Key points:</p> <ul> <li><code>onInit</code> checks Go version, shows GOROOT and GOPATH, and verifies Go modules if present</li> <li>Sets <code>GO111MODULE=on</code> to enable Go modules</li> <li>Sets <code>CGO_ENABLED=1</code> for CGO support (useful for many Go packages)</li> <li><code>postAttach</code> shows Go version and module information when reconnecting</li> <li>Uses blue-colored prompt to distinguish Go environments</li> <li><code>inheritEnv: true</code> allows PATH and Go tools to work correctly</li> <li>Teams can customize the <code>cwd</code> path to match their project location</li> </ul> <p>Customization:</p> <ul> <li>Update <code>cwd</code> to point to your project directory</li> <li>Adjust <code>GO111MODULE</code> or <code>CGO_ENABLED</code> based on your project needs</li> <li>Add additional environment variables for Go-specific configuration</li> <li>Modify lifecycle hooks to run tests, builds, or other setup steps</li> </ul>"},{"location":"guides/profiles/#11-ci-test-cicd-test-environment","title":"11. <code>ci-test</code> - CI/CD test environment","text":"<p>See <code>ci-test.yaml</code> for the complete profile.</p> <p>Sets up a local test environment that mirrors CI/CD pipelines. Use this profile to test locally with the same environment variables as your CI system.</p> <p>Key points:</p> <ul> <li>Sets <code>CI=true</code> to indicate CI environment</li> <li>Sets <code>NODE_ENV=test</code> and <code>PYTHON_ENV=test</code> for test configurations</li> <li><code>restartPolicy: exit</code> ensures clean test runs</li> <li><code>onInit</code> confirms CI environment variables are set</li> <li><code>postAttach</code> displays current environment status</li> <li>Uses purple-colored prompt to distinguish CI test environments</li> <li><code>inheritEnv: true</code> allows access to system tools and PATH</li> </ul> <p>Customization:</p> <ul> <li>Add additional CI-specific environment variables</li> <li>Customize test environment variables based on your CI/CD setup</li> <li>Add lifecycle hooks to run tests or setup test databases</li> <li>Adjust <code>cwd</code> to point to your project directory</li> </ul>"},{"location":"guides/profiles/#12-terraform-dev-terraform-development-workspace","title":"12. <code>terraform-dev</code> - Terraform development workspace","text":"<p>See <code>terraform-dev.yaml</code> for the complete profile.</p> <p>Prepares a Terraform development workspace with environment-specific configuration. Similar to <code>terraform-prd</code> but for development environments.</p> <p>Key points:</p> <ul> <li><code>restartPolicy: exit</code> prevents accidental restarts in development</li> <li><code>onInit</code> prepares the Terraform workspace for development before you start working</li> <li>Environment variable <code>TF_VAR_environment: \"dev\"</code> is available to Terraform</li> <li>Uses blue-colored prompt (vs red for production) to distinguish environments</li> <li>Automatically runs <code>terraform workspace use dev</code> and <code>terraform init</code></li> </ul> <p>Customization:</p> <ul> <li>Update <code>cwd</code> to point to your Terraform project directory</li> <li>Add additional Terraform variables via <code>env</code> section</li> <li>Modify lifecycle hooks to run specific Terraform commands</li> <li>Adjust workspace name if your team uses different naming conventions</li> </ul>"},{"location":"guides/profiles/#13-terraform-staging-terraform-staging-workspace","title":"13. <code>terraform-staging</code> - Terraform staging workspace","text":"<p>See <code>terraform-staging.yaml</code> for the complete profile.</p> <p>Prepares a Terraform staging workspace with environment-specific configuration. Similar to <code>terraform-prd</code> and <code>terraform-dev</code> but for staging environments.</p> <p>Key points:</p> <ul> <li><code>restartPolicy: exit</code> prevents accidental restarts in staging</li> <li><code>onInit</code> prepares the Terraform workspace for staging before you start working</li> <li>Environment variable <code>TF_VAR_environment: \"staging\"</code> is available to Terraform</li> <li>Uses yellow-colored prompt (vs red for production, blue for dev) to distinguish environments</li> <li>Automatically runs <code>terraform workspace use staging</code> and <code>terraform init</code></li> </ul> <p>Customization:</p> <ul> <li>Update <code>cwd</code> to point to your Terraform project directory</li> <li>Add additional Terraform variables via <code>env</code> section</li> <li>Modify lifecycle hooks to run specific Terraform commands</li> <li>Adjust workspace name if your team uses different naming conventions</li> </ul>"},{"location":"guides/profiles/#14-postgres-postgresql-database-shell","title":"14. <code>postgres</code> - PostgreSQL database shell","text":"<p>See <code>postgres.yaml</code> for the complete profile.</p> <p>Connects to a PostgreSQL database using the <code>psql</code> CLI. Perfect for database operations, debugging, and administration with persistent terminal sessions.</p> <p>Key points:</p> <ul> <li><code>cmd</code> is <code>psql</code>, not a shell</li> <li><code>cmdArgs</code> contains connection parameters: host, user, and database</li> <li>Uses environment variables for connection: <code>PGHOST</code>, <code>PGUSER</code>, <code>PGDATABASE</code>, <code>PGPORT</code></li> <li><code>restartPolicy: exit</code> ensures clean disconnection</li> <li>Password can be set via <code>PGPASSWORD</code> environment variable or entered interactively</li> </ul> <p>Customization:</p> <ul> <li>Update environment variables to match your PostgreSQL connection details</li> <li>Add additional <code>psql</code> command-line arguments if needed</li> <li>Use connection string format: <code>psql \"postgresql://user:password@host:port/database\"</code></li> <li>Set <code>PGPASSWORD</code> in environment for non-interactive password entry</li> </ul>"},{"location":"guides/profiles/#15-aws-cli-aws-cli-environment","title":"15. <code>aws-cli</code> - AWS CLI environment","text":"<p>See <code>aws-cli.yaml</code> for the complete profile.</p> <p>Sets up an AWS CLI environment for infrastructure management. Perfect for managing AWS resources with consistent profile and region configuration.</p> <p>Key points:</p> <ul> <li><code>onInit</code> verifies AWS CLI installation and authenticates with AWS</li> <li>Sets AWS profile and region via environment variables: <code>AWS_PROFILE</code>, <code>AWS_REGION</code>, <code>AWS_DEFAULT_REGION</code></li> <li><code>postAttach</code> shows current AWS identity and configuration when reconnecting</li> <li>Uses yellow-colored prompt showing AWS profile and region</li> <li>Verifies AWS credentials with <code>aws sts get-caller-identity</code></li> <li><code>inheritEnv: true</code> allows AWS CLI and other tools to work correctly</li> </ul> <p>Customization:</p> <ul> <li>Update <code>AWS_PROFILE</code> to use a specific AWS profile</li> <li>Change <code>AWS_REGION</code> to your preferred default region</li> <li>Add additional AWS-specific environment variables</li> <li>Modify lifecycle hooks to verify specific AWS resources or run AWS commands</li> </ul>"},{"location":"guides/profiles/#16-docker-compose-docker-compose-development","title":"16. <code>docker-compose</code> - Docker Compose development","text":"<p>See <code>docker-compose.yaml</code> for the complete profile.</p> <p>Sets up a Docker Compose development environment for managing multi-service applications. Automatically starts services and shows status on attach.</p> <p>Key points:</p> <ul> <li><code>onInit</code> checks docker-compose version and starts services if <code>docker-compose.yml</code> exists</li> <li><code>postAttach</code> shows service status and recent logs when reconnecting</li> <li>Sets <code>COMPOSE_PROJECT_NAME</code> to organize Docker Compose projects</li> <li>Uses cyan-colored prompt to distinguish Docker Compose environments</li> <li><code>inheritEnv: true</code> allows Docker and docker-compose commands to work correctly</li> <li>Automatically runs <code>docker-compose up -d</code> to start services in detached mode</li> </ul> <p>Customization:</p> <ul> <li>Update <code>cwd</code> to point to your project directory with <code>docker-compose.yml</code></li> <li>Modify <code>COMPOSE_PROJECT_NAME</code> to match your project naming</li> <li>Add lifecycle hooks to run specific docker-compose commands</li> <li>Adjust service startup behavior (e.g., <code>docker-compose up</code> vs <code>docker-compose up -d</code>)</li> </ul>"},{"location":"guides/profiles/#17-redis-redis-cli","title":"17. <code>redis</code> - Redis CLI","text":"<p>See <code>redis.yaml</code> for the complete profile.</p> <p>Connects to a Redis instance using the <code>redis-cli</code> command. Perfect for debugging cache issues and performing Redis operations with persistent sessions.</p> <p>Key points:</p> <ul> <li><code>cmd</code> is <code>redis-cli</code>, not a shell</li> <li><code>cmdArgs</code> contains connection parameters: host and port</li> <li>Uses environment variables for connection: <code>REDIS_HOST</code>, <code>REDIS_PORT</code>, <code>REDIS_PASSWORD</code></li> <li><code>restartPolicy: exit</code> ensures clean disconnection</li> <li>Password can be set via <code>REDIS_PASSWORD</code> environment variable or passed via <code>-a</code> flag</li> </ul> <p>Customization:</p> <ul> <li>Update environment variables to match your Redis connection details</li> <li>Add password authentication: <code>-a \"$REDIS_PASSWORD\"</code> in <code>cmdArgs</code></li> <li>Use connection string format: <code>redis-cli -u redis://password@host:port</code></li> <li>Add additional Redis CLI options as needed</li> </ul>"},{"location":"guides/profiles/#18-rust-dev-rust-development-environment","title":"18. <code>rust-dev</code> - Rust development environment","text":"<p>See <code>rust-dev.yaml</code> for the complete profile.</p> <p>Sets up a Rust development environment with toolchain verification. Teams can share this profile to ensure consistent Rust environment setup across team members.</p> <p>Key points:</p> <ul> <li><code>onInit</code> checks Rust and Cargo versions, verifies Rust project if <code>Cargo.toml</code> exists</li> <li>Sets <code>RUST_BACKTRACE=1</code> for better error debugging</li> <li><code>postAttach</code> shows Rust/Cargo versions and project information when reconnecting</li> <li>Uses red-colored prompt to distinguish Rust environments</li> <li><code>inheritEnv: true</code> allows PATH and Rust tools to work correctly</li> <li>Teams can customize the <code>cwd</code> path to match their project location</li> </ul> <p>Customization:</p> <ul> <li>Update <code>cwd</code> to point to your project directory</li> <li>Adjust <code>RUST_BACKTRACE</code> setting based on your debugging needs</li> <li>Add additional Rust-specific environment variables</li> <li>Modify lifecycle hooks to run tests, builds, or other setup steps</li> </ul>"},{"location":"guides/profiles/#19-mysql-mysql-database-shell","title":"19. <code>mysql</code> - MySQL database shell","text":"<p>See <code>mysql.yaml</code> for the complete profile.</p> <p>Connects to a MySQL database using the <code>mysql</code> CLI. Perfect for database operations, debugging, and administration with persistent terminal sessions.</p> <p>Key points:</p> <ul> <li><code>cmd</code> is <code>mysql</code>, not a shell</li> <li><code>cmdArgs</code> contains connection parameters: host, user, database, and password prompt</li> <li>Uses environment variables for connection: <code>MYSQL_HOST</code>, <code>MYSQL_USER</code>, <code>MYSQL_DATABASE</code>, <code>MYSQL_PASSWORD</code></li> <li><code>restartPolicy: exit</code> ensures clean disconnection</li> <li>Password can be set via <code>MYSQL_PWD</code> environment variable or entered interactively with <code>-p</code> flag</li> </ul> <p>Customization:</p> <ul> <li>Update environment variables to match your MySQL connection details</li> <li>Use <code>MYSQL_PWD</code> environment variable for non-interactive password entry (less secure)</li> <li>Add additional MySQL command-line arguments if needed</li> <li>Use connection string format: <code>mysql -h host -u user -p password database</code></li> </ul>"},{"location":"guides/profiles/#20-mongo-mongodb-database-shell","title":"20. <code>mongo</code> - MongoDB database shell","text":"<p>See <code>mongo.yaml</code> for the complete profile.</p> <p>Connects to a MongoDB database using the <code>mongosh</code> CLI (MongoDB Shell). Perfect for database operations, debugging, and administration with persistent terminal sessions.</p> <p>Key points:</p> <ul> <li><code>cmd</code> is <code>mongosh</code>, not a shell</li> <li><code>cmdArgs</code> contains connection URI: <code>mongodb://localhost:27017</code> by default</li> <li>Uses environment variables for connection: <code>MONGO_URI</code>, <code>MONGO_HOST</code>, <code>MONGO_PORT</code>, <code>MONGO_DATABASE</code>, <code>MONGO_USER</code>, <code>MONGO_PASSWORD</code></li> <li><code>restartPolicy: exit</code> ensures clean disconnection</li> <li>Supports connection string format: <code>mongodb://user:password@host:port/database</code></li> </ul> <p>Customization:</p> <ul> <li>Update <code>MONGO_URI</code> to match your MongoDB connection string</li> <li>Use individual environment variables (<code>MONGO_HOST</code>, <code>MONGO_PORT</code>, etc.) to build connection string</li> <li>Add authentication: <code>mongodb://username:password@host:port/database</code></li> <li>Add additional mongosh command-line arguments if needed</li> <li>Use connection string with authentication: Update <code>MONGO_URI</code> to include credentials</li> </ul>"},{"location":"guides/profiles/#creating-your-own-profile","title":"Creating Your Own Profile","text":""},{"location":"guides/profiles/#step-by-step-guide","title":"Step-by-step guide","text":"<ol> <li>Start with a copy: Copy an existing profile that's close to what you need</li> <li>Change the name: Update <code>metadata.name</code> to something meaningful</li> <li>Customize the command: Set <code>cmd</code> and <code>cmdArgs</code> for what you want to run</li> <li>Set the working directory: Use <code>cwd</code> to start in the right place</li> <li>Configure environment: Add <code>env</code> variables or set <code>inheritEnv</code></li> <li>Add lifecycle hooks: Use <code>onInit</code> and <code>postAttach</code> if needed</li> <li>Test it: Run <code>sbsh -p &lt;your-profile-name&gt;</code> and verify everything works</li> </ol>"},{"location":"guides/profiles/#best-practices","title":"Best practices","text":"<ol> <li>Use descriptive names: <code>my-project-dev</code> is better than <code>test1</code></li> <li>Prefer <code>cmdArgs</code> arrays: Keep <code>cmd</code> clean and use <code>cmdArgs</code> for arguments</li> <li>Use <code>inheritEnv: false</code> for isolation: Better for reproducible environments</li> <li>Use <code>inheritEnv: true</code> for convenience: When you need full PATH and other tools</li> <li>Quote numbers in env: <code>HISTSIZE: \"5000\"</code> not <code>HISTSIZE: 5000</code></li> <li>Use <code>~</code> for home directory: It's expanded at terminal start</li> <li>Use <code>restartPolicy: exit</code> for containers/SSH: These should exit cleanly</li> <li>Use <code>restartPolicy: restart-on-error</code> for services: When you want resilience</li> </ol>"},{"location":"guides/profiles/#common-issues-and-solutions","title":"Common Issues and Solutions","text":""},{"location":"guides/profiles/#profile-not-found","title":"Profile not found","text":"<p>Problem: <code>sbsh</code> says \"profile not found\"</p> <p>Solutions:</p> <ul> <li>Check the profile name matches exactly (case-sensitive)</li> <li>Verify <code>~/.sbsh/profiles.yaml</code> exists</li> <li>Run <code>sb get profiles</code> to see available profiles</li> <li>Check if you're using a custom profiles file path</li> </ul>"},{"location":"guides/profiles/#environment-variables-not-working","title":"Environment variables not working","text":"<p>Problem: Environment variables aren't available in the terminal</p> <p>Solutions:</p> <ul> <li>If <code>inheritEnv: false</code>, make sure variables are in the <code>env</code> map</li> <li>Use <code>$HOME</code> instead of <code>~</code> in env values</li> <li>Quote variable values that contain spaces or special characters</li> <li>Numbers must be strings: <code>\"5000\"</code> not <code>5000</code></li> </ul>"},{"location":"guides/profiles/#prompt-not-showing-colors","title":"Prompt not showing colors","text":"<p>Problem: Shell prompt lacks colors or escape sequences</p> <p>Solutions:</p> <ul> <li>Quote prompts carefully in YAML</li> <li>Use double quotes around the prompt string: <code>prompt: '\"\\[\\e[1;31m\\]...\\\"\"</code></li> <li>Test with simpler prompts first, then add complexity</li> <li>Remember to escape backslashes: <code>\\\\u</code> not <code>\\u</code></li> </ul>"},{"location":"guides/profiles/#stages-not-running","title":"Stages not running","text":"<p>Problem: Commands in <code>onInit</code> or <code>postAttach</code> don't execute</p> <p>Solutions:</p> <ul> <li>Verify YAML syntax is correct (indentation matters!)</li> <li>Check that <code>script:</code> is indented under each stage item</li> <li>Ensure commands are available in the environment</li> <li>Use absolute paths for commands if PATH isn't set</li> </ul>"},{"location":"guides/profiles/#tilde-not-expanding","title":"Tilde (<code>~</code>) not expanding","text":"<p>Problem: <code>~</code> appears literally instead of expanding to home directory</p> <p>Solutions:</p> <ul> <li>Tilde expands in <code>cwd</code> but not in <code>env</code> values</li> <li>Use <code>$HOME</code> in environment variables: <code>PATH: \"$HOME/bin:$PATH\"</code></li> <li>Use absolute paths if expansion is unreliable</li> </ul>"},{"location":"guides/profiles/#testing-your-profiles","title":"Testing Your Profiles","text":"<ol> <li>Validate syntax: Use a YAML validator or check with <code>yaml</code> tools</li> <li>List profiles: Run <code>sb get profiles</code> to see if your profile appears</li> <li>Test the profile: Run <code>sbsh -p &lt;profile-name&gt;</code> to start a terminal</li> <li>Check environment: Run <code>env</code> to verify variables are set correctly</li> <li>Test stages: Detach and reattach to verify <code>postAttach</code> runs</li> <li>Test restart policy: Exit the terminal and see if it restarts as expected</li> </ol>"},{"location":"guides/profiles/#viewing-available-profiles","title":"Viewing Available Profiles","text":"<p>List all profiles in your profiles file:</p> <pre><code>sb get profiles\n</code></pre> <p>This shows:</p> <ul> <li>Profile name</li> <li>Run target</li> <li>Number of environment variables</li> <li>Command that will be executed</li> </ul>"},{"location":"guides/profiles/#custom-profile-file-location","title":"Custom Profile File Location","text":"<p>By default, sbsh uses <code>~/.sbsh/profiles.yaml</code>. To use a different location:</p> <p>Using environment variable:</p> <pre><code>export SBSH_PROFILES_FILE=/path/to/custom/profiles.yaml\nsbsh -p my-profile\n</code></pre> <p>Using command flag:</p> <pre><code>sbsh --profiles-file /path/to/custom/profiles.yaml -p my-profile\n</code></pre>"},{"location":"guides/profiles/#profile-file-organization","title":"Profile File Organization","text":"<p>sbsh loads all profiles from a single <code>profiles.yaml</code> file. Multiple profiles are defined in the same file, separated by <code>---</code> (YAML document separator).</p> <p>Example profiles are provided as individual files in this directory for reference and documentation purposes. To use them, you must combine them into a single <code>profiles.yaml</code> file:</p> <pre><code># Copy the pre-combined file (recommended)\n# Copy from repository\ncp &lt;repository-root&gt;/docs/profiles/profiles.yaml ~/.sbsh/profiles.yaml\n\n# Or combine specific example files\ncat &lt;repository-root&gt;/docs/profiles/default.yaml &lt;repository-root&gt;/docs/profiles/python-venv.yaml &gt; ~/.sbsh/profiles.yaml\n</code></pre> <p>Important: sbsh only reads from a single <code>profiles.yaml</code> file. The individual <code>.yaml</code> files in the repository's <code>docs/profiles/</code> directory are examples for reference only.</p>"},{"location":"guides/profiles/#contributing-examples","title":"Contributing Examples","text":"<p>Found a useful profile pattern? We'd love to see it! Consider opening a pull request with:</p> <ul> <li>Your profile as a new file in the repository's <code>docs/profiles/</code> directory (e.g., <code>my-profile.yaml</code>) - provided as a reference example</li> <li>Add the profile to <code>docs/profiles/profiles.yaml</code> (the combined file) with <code>---</code> separator</li> <li>Update this README to document the new profile</li> <li>A brief description of the use case</li> <li>Any special requirements or setup instructions</li> </ul> <p>Happy profiling! \ud83d\ude80</p>"},{"location":"install/install-linux/","title":"Installing sbsh on Linux","text":"<p>Install sbsh on Linux systems (Ubuntu, Debian, RHEL, CentOS, etc.).</p>"},{"location":"install/install-linux/#quick-install","title":"Quick Install","text":"<pre><code># Set your architecture (default shown)\nexport ARCH=amd64      # Options: amd64, arm64\n\n# Install sbsh\ncurl -L -o sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-${ARCH} &amp;&amp; \\\nchmod +x sbsh &amp;&amp; \\\nsudo install -m 0755 sbsh /usr/local/bin/sbsh &amp;&amp; \\\nsudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n</code></pre>"},{"location":"install/install-linux/#verify-installation","title":"Verify Installation","text":"<pre><code># Check version\nsbsh --version\nsb --version\n\n# Test basic functionality\nsbsh --help\nsb --help\n</code></pre>"},{"location":"install/install-linux/#autocomplete-setup","title":"Autocomplete Setup","text":""},{"location":"install/install-linux/#bash","title":"Bash","text":"<p>Add to <code>~/.bashrc</code>:</p> <pre><code>cat &gt;&gt; ~/.bashrc &lt;&lt;EOF\nsource &lt;(sbsh autocomplete bash)\nsource &lt;(sb autocomplete bash)\nEOF\n</code></pre> <p>Reload your shell:</p> <pre><code>source ~/.bashrc\n</code></pre>"},{"location":"install/install-linux/#zsh","title":"Zsh","text":"<p>Add to <code>~/.zshrc</code>:</p> <pre><code>cat &gt;&gt; ~/.zshrc &lt;&lt;EOF\nsource &lt;(sbsh autocomplete zsh)\nsource &lt;(sb autocomplete zsh)\nEOF\n</code></pre> <p>Reload your shell:</p> <pre><code>source ~/.zshrc\n</code></pre>"},{"location":"install/install-linux/#alternative-installation-methods","title":"Alternative Installation Methods","text":""},{"location":"install/install-linux/#manual-installation","title":"Manual Installation","text":"<p>Download and install manually:</p> <pre><code># Download\nwget https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64\n\n# Make executable\nchmod +x sbsh-linux-amd64\n\n# Install\nsudo mv sbsh-linux-amd64 /usr/local/bin/sbsh\nsudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n</code></pre>"},{"location":"install/install-linux/#user-local-installation","title":"User-local Installation","text":"<p>Install to <code>~/bin</code> (add to PATH):</p> <pre><code>mkdir -p ~/bin\ncurl -L -o ~/bin/sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64\nchmod +x ~/bin/sbsh\nln -f ~/bin/sbsh ~/bin/sb\n\n# Add to PATH in ~/.bashrc or ~/.zshrc\nexport PATH=\"$HOME/bin:$PATH\"\n</code></pre>"},{"location":"install/install-linux/#troubleshooting","title":"Troubleshooting","text":""},{"location":"install/install-linux/#permission-denied","title":"Permission Denied","text":"<p>If you get permission errors, ensure the binary is executable:</p> <pre><code>chmod +x sbsh\n</code></pre>"},{"location":"install/install-linux/#command-not-found","title":"Command Not Found","text":"<p>If <code>sbsh</code> is not found after installation:</p> <ol> <li>Verify the binary is in your PATH: <code>which sbsh</code></li> <li>Check <code>/usr/local/bin</code> is in PATH: <code>echo $PATH</code></li> <li>Reload your shell: <code>source ~/.bashrc</code> or <code>source ~/.zshrc</code></li> </ol>"},{"location":"install/install-linux/#pty-issues","title":"PTY Issues","text":"<p>If you encounter PTY-related errors:</p> <pre><code># Check PTY support\ntest -c /dev/ptmx &amp;&amp; echo \"PTY available\"\n\n# Check permissions\nls -l /dev/ptmx\n</code></pre>"},{"location":"install/install-linux/#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started - Your first terminal session</li> <li>Prerequisites - System requirements</li> </ul>"},{"location":"install/install-macos/","title":"Installing sbsh on macOS","text":"<p>Install sbsh on macOS systems.</p>"},{"location":"install/install-macos/#quick-install","title":"Quick Install","text":"<pre><code># Set your architecture (Apple Silicon uses arm64, Intel uses amd64)\nexport ARCH=arm64      # For Apple Silicon (M1/M2/M3)\n# export ARCH=amd64    # For Intel Macs\n\n# Install sbsh\ncurl -L -o sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-darwin-${ARCH} &amp;&amp; \\\nchmod +x sbsh &amp;&amp; \\\nsudo install -m 0755 sbsh /usr/local/bin/sbsh &amp;&amp; \\\nsudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n</code></pre>"},{"location":"install/install-macos/#verify-installation","title":"Verify Installation","text":"<pre><code># Check version\nsbsh --version\nsb --version\n\n# Test basic functionality\nsbsh --help\nsb --help\n</code></pre>"},{"location":"install/install-macos/#autocomplete-setup","title":"Autocomplete Setup","text":""},{"location":"install/install-macos/#bash","title":"Bash","text":"<p>Add to <code>~/.bashrc</code> or <code>~/.bash_profile</code>:</p> <pre><code>cat &gt;&gt; ~/.bash_profile &lt;&lt;EOF\nsource &lt;(sbsh autocomplete bash)\nsource &lt;(sb autocomplete bash)\nEOF\n</code></pre> <p>Reload your shell:</p> <pre><code>source ~/.bash_profile\n</code></pre>"},{"location":"install/install-macos/#zsh","title":"Zsh","text":"<p>Add to <code>~/.zshrc</code>:</p> <pre><code>cat &gt;&gt; ~/.zshrc &lt;&lt;EOF\nsource &lt;(sbsh autocomplete zsh)\nsource &lt;(sb autocomplete zsh)\nEOF\n</code></pre> <p>Reload your shell:</p> <pre><code>source ~/.zshrc\n</code></pre>"},{"location":"install/install-macos/#alternative-installation-methods","title":"Alternative Installation Methods","text":""},{"location":"install/install-macos/#homebrew-coming-soon","title":"Homebrew (Coming Soon)","text":"<p>Homebrew installation is planned for future releases.</p>"},{"location":"install/install-macos/#manual-installation","title":"Manual Installation","text":"<p>Download and install manually:</p> <pre><code># Download (Apple Silicon)\ncurl -L -o sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-darwin-arm64\n\n# Or for Intel Macs\n# curl -L -o sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-darwin-amd64\n\n# Make executable\nchmod +x sbsh\n\n# Install\nsudo mv sbsh /usr/local/bin/sbsh\nsudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n</code></pre>"},{"location":"install/install-macos/#user-local-installation","title":"User-local Installation","text":"<p>Install to <code>~/bin</code> (add to PATH):</p> <pre><code>mkdir -p ~/bin\ncurl -L -o ~/bin/sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-darwin-arm64\nchmod +x ~/bin/sbsh\nln -f ~/bin/sbsh ~/bin/sb\n\n# Add to PATH in ~/.zshrc\necho 'export PATH=\"$HOME/bin:$PATH\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n</code></pre>"},{"location":"install/install-macos/#troubleshooting","title":"Troubleshooting","text":""},{"location":"install/install-macos/#gatekeeper-warnings","title":"Gatekeeper Warnings","text":"<p>macOS may show a security warning. To allow the binary:</p> <ol> <li>Open System Settings \u2192 Privacy &amp; Security</li> <li>Click \"Open Anyway\" if prompted</li> <li>Or remove the quarantine attribute:</li> </ol> <pre><code>xattr -d com.apple.quarantine sbsh\n</code></pre>"},{"location":"install/install-macos/#architecture-mismatch","title":"Architecture Mismatch","text":"<p>Verify your Mac's architecture:</p> <pre><code># Check architecture\nuname -m\n# arm64 for Apple Silicon, x86_64 for Intel\n</code></pre> <p>Use the correct binary:</p> <ul> <li>Apple Silicon (M1/M2/M3): <code>sbsh-darwin-arm64</code></li> <li>Intel Macs: <code>sbsh-darwin-amd64</code></li> </ul>"},{"location":"install/install-macos/#command-not-found","title":"Command Not Found","text":"<p>If <code>sbsh</code> is not found after installation:</p> <ol> <li>Verify the binary is in your PATH: <code>which sbsh</code></li> <li>Check <code>/usr/local/bin</code> is in PATH: <code>echo $PATH</code></li> <li>Reload your shell: <code>source ~/.zshrc</code> or <code>source ~/.bash_profile</code></li> </ol>"},{"location":"install/install-macos/#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started - Your first terminal session</li> <li>Prerequisites - System requirements</li> </ul>"},{"location":"install/install-windows/","title":"Installing sbsh on Windows","text":"<p>Windows support for sbsh is planned but not yet available. Use one of these alternatives:</p>"},{"location":"install/install-windows/#option-1-windows-subsystem-for-linux-wsl","title":"Option 1: Windows Subsystem for Linux (WSL)","text":"<p>Install sbsh in WSL and use it from Windows:</p>"},{"location":"install/install-windows/#install-wsl","title":"Install WSL","text":"<pre><code># Install WSL (if not already installed)\nwsl --install\n</code></pre>"},{"location":"install/install-windows/#install-sbsh-in-wsl","title":"Install sbsh in WSL","text":"<p>Follow the Linux installation instructions inside your WSL environment.</p>"},{"location":"install/install-windows/#usage","title":"Usage","text":"<p>Access sbsh from Windows:</p> <pre><code># From PowerShell or CMD\nwsl sbsh\nwsl sb get terminals\n</code></pre>"},{"location":"install/install-windows/#option-2-docker","title":"Option 2: Docker","text":"<p>Run sbsh in a Docker container on Windows:</p>"},{"location":"install/install-windows/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker Desktop for Windows</li> </ul>"},{"location":"install/install-windows/#run-sbsh-container","title":"Run sbsh Container","text":"<pre><code># Run sbsh interactively\ndocker run -it --rm `\n  -v ${env:USERPROFILE}\\.sbsh:/root/.sbsh `\n  docker.io/eminwux/sbsh:v0.5.0-linux-amd64 `\n  sbsh\n</code></pre> <p>See the Container Usage Guide for detailed Docker instructions.</p>"},{"location":"install/install-windows/#option-3-virtual-machine","title":"Option 3: Virtual Machine","text":"<p>Run sbsh in a Linux virtual machine:</p> <ol> <li>Install a Linux distribution (Ubuntu, Debian, etc.) in a VM</li> <li>Follow the Linux installation instructions</li> <li>Access via SSH or VM console</li> </ol>"},{"location":"install/install-windows/#native-windows-support","title":"Native Windows Support","text":"<p>Native Windows support is planned for future releases. This will include:</p> <ul> <li>Native Windows binary</li> <li>Windows-specific path handling</li> <li>Integration with Windows Terminal</li> <li>PowerShell profile support</li> </ul>"},{"location":"install/install-windows/#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started - Your first terminal session</li> <li>Container Usage - Using sbsh in Docker</li> </ul>"},{"location":"install/prerequisites/","title":"Prerequisites","text":"<p>System requirements and dependencies for installing sbsh.</p>"},{"location":"install/prerequisites/#system-requirements","title":"System Requirements","text":""},{"location":"install/prerequisites/#supported-operating-systems","title":"Supported Operating Systems","text":"<ul> <li>Linux: All major distributions (Ubuntu, Debian, RHEL, CentOS, etc.)</li> <li>macOS: macOS 10.14 (Mojave) or later</li> <li>FreeBSD: FreeBSD 12.0 or later</li> </ul>"},{"location":"install/prerequisites/#supported-architectures","title":"Supported Architectures","text":"<ul> <li>amd64 (x86_64): Intel and AMD processors</li> <li>arm64: ARM64 processors (Apple Silicon, AWS Graviton, etc.)</li> </ul>"},{"location":"install/prerequisites/#system-dependencies","title":"System Dependencies","text":"<p>sbsh requires minimal system dependencies:</p> <ul> <li>procps: Process management utilities (usually pre-installed on Linux)</li> <li>Unix domain sockets: For inter-process communication</li> <li>PTY support: For terminal emulation</li> </ul>"},{"location":"install/prerequisites/#permissions","title":"Permissions","text":"<p>sbsh requires:</p> <ul> <li>Write access to <code>~/.sbsh/</code> directory (created automatically)</li> <li>Ability to create Unix domain sockets</li> <li>PTY device access (usually available by default)</li> </ul>"},{"location":"install/prerequisites/#verification","title":"Verification","text":"<p>Check if your system meets the requirements:</p> <pre><code># Check architecture\nuname -m\n\n# Check for procps (Linux)\nwhich ps\n\n# Check PTY support\ntest -c /dev/ptmx &amp;&amp; echo \"PTY support available\"\n</code></pre>"},{"location":"install/prerequisites/#next-steps","title":"Next Steps","text":"<ul> <li>Linux Installation</li> <li>macOS Installation</li> <li>Windows Installation</li> </ul>"},{"location":"tutorials/automate-terminal-workflows/","title":"Automate Terminal Workflows","text":"<p>This tutorial shows you how to automate terminal workflows using sbsh profiles and scripts.</p>"},{"location":"tutorials/automate-terminal-workflows/#prerequisites","title":"Prerequisites","text":"<ul> <li>sbsh installed</li> <li>Basic shell scripting knowledge</li> </ul>"},{"location":"tutorials/automate-terminal-workflows/#automation-patterns","title":"Automation Patterns","text":""},{"location":"tutorials/automate-terminal-workflows/#pattern-1-automated-setup-script","title":"Pattern 1: Automated Setup Script","text":"<p>Create a script that sets up a terminal environment:</p> <pre><code>#!/bin/bash\n# setup-dev-env.sh\n\n# Start terminal with profile\nsbsh terminal --name dev-setup -p dev-profile\n\n# Wait for terminal to be ready\nsleep 2\n\n# Attach and run setup commands\nsb attach dev-setup &lt;&lt;EOF\nnpm install\nnpm run build\nEOF\n</code></pre>"},{"location":"tutorials/automate-terminal-workflows/#pattern-2-cicd-integration","title":"Pattern 2: CI/CD Integration","text":"<p>Use sbsh in CI/CD pipelines for reproducible environments:</p> <pre><code># .github/workflows/test.yml\nname: Tests\non: [push]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup sbsh\n        run: |\n          wget -O sbsh https://github.com/eminwux/sbsh/releases/download/v0.5.0/sbsh-linux-amd64\n          chmod +x sbsh &amp;&amp; sudo install -m 0755 sbsh /usr/local/bin/sbsh\n          sudo ln -f /usr/local/bin/sbsh /usr/local/bin/sb\n\n      - name: Create test profile\n        run: |\n          mkdir -p ~/.sbsh\n          cat &gt; ~/.sbsh/profiles.yaml &lt;&lt;PROFILE\n          apiVersion: sbsh/v1beta1\n          kind: TerminalProfile\n          metadata:\n            name: ci-test\n          spec:\n            shell:\n              cwd: \"${{ github.workspace }}\"\n              env:\n                CI: \"true\"\n          PROFILE\n\n      - name: Run tests\n        run: sbsh -p ci-test --name \"ci-${{ github.run_id }}\"\n</code></pre> <p>See the CI/CD Guide for complete examples.</p>"},{"location":"tutorials/automate-terminal-workflows/#pattern-3-scheduled-tasks","title":"Pattern 3: Scheduled Tasks","text":"<p>Use systemd timers or cron with sbsh:</p> <pre><code># /etc/cron.daily/backup\n#!/bin/bash\nsbsh terminal --name daily-backup -p backup-profile\n</code></pre>"},{"location":"tutorials/automate-terminal-workflows/#pattern-4-profile-based-automation","title":"Pattern 4: Profile-Based Automation","text":"<p>Create profiles that automate common tasks:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: auto-deploy\nspec:\n  shell:\n    cwd: \"$HOME/projects/myapp\"\n    env:\n      DEPLOY_ENV: \"production\"\n  stages:\n    onInit:\n      - script: git pull\n      - script: npm install\n      - script: npm run build\n      - script: ./deploy.sh\n</code></pre>"},{"location":"tutorials/automate-terminal-workflows/#scripting-examples","title":"Scripting Examples","text":""},{"location":"tutorials/automate-terminal-workflows/#wait-for-terminal-ready","title":"Wait for Terminal Ready","text":"<pre><code>#!/bin/bash\nTERMINAL_NAME=\"my-terminal\"\n\n# Start terminal\nsbsh terminal --name \"$TERMINAL_NAME\" -p my-profile\n\n# Wait for terminal to be ready\nwhile ! sb get terminal \"$TERMINAL_NAME\" &gt; /dev/null 2&gt;&amp;1; do\n  sleep 0.5\ndone\n\necho \"Terminal $TERMINAL_NAME is ready\"\n</code></pre>"},{"location":"tutorials/automate-terminal-workflows/#batch-terminal-operations","title":"Batch Terminal Operations","text":"<pre><code>#!/bin/bash\n# Start multiple terminals\nfor env in dev staging prod; do\n  sbsh terminal --name \"terraform-$env\" -p \"terraform-$env\"\ndone\n\n# List all started terminals\nsb get terminals\n</code></pre>"},{"location":"tutorials/automate-terminal-workflows/#terminal-health-check","title":"Terminal Health Check","text":"<pre><code>#!/bin/bash\n# Check terminal status\nTERMINAL_NAME=\"my-terminal\"\n\nSTATUS=$(sb get terminal \"$TERMINAL_NAME\" -o json | jq -r '.status')\n\nif [ \"$STATUS\" = \"Ready\" ] || [ \"$STATUS\" = \"Attached\" ]; then\n  echo \"Terminal is healthy\"\n  exit 0\nelse\n  echo \"Terminal is not healthy: $STATUS\"\n  exit 1\nfi\n</code></pre>"},{"location":"tutorials/automate-terminal-workflows/#integration-with-other-tools","title":"Integration with Other Tools","text":""},{"location":"tutorials/automate-terminal-workflows/#docker-compose","title":"Docker Compose","text":"<pre><code># docker-compose.yml\nversion: \"3.8\"\nservices:\n  sbsh:\n    image: docker.io/eminwux/sbsh:v0.5.0-linux-amd64\n    volumes:\n      - ~/.sbsh:/root/.sbsh\n    command: sbsh terminal --name automated-task -p my-profile\n</code></pre>"},{"location":"tutorials/automate-terminal-workflows/#kubernetes-jobs","title":"Kubernetes Jobs","text":"<pre><code>apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: sbsh-automated-task\nspec:\n  template:\n    spec:\n      containers:\n        - name: sbsh\n          image: docker.io/eminwux/sbsh:v0.5.0-linux-amd64\n          command:\n            [\"/bin/sbsh\", \"terminal\", \"--name\", \"k8s-task\", \"-p\", \"my-profile\"]\n</code></pre>"},{"location":"tutorials/automate-terminal-workflows/#best-practices","title":"Best Practices","text":"<ol> <li>Use named terminals: Always use <code>--name</code> for automation</li> <li>Check terminal status: Verify terminals are ready before use</li> <li>Handle errors: Check exit codes and terminal states</li> <li>Clean up: Prune old automated terminals</li> <li>Log everything: Use terminal logs for debugging</li> </ol>"},{"location":"tutorials/automate-terminal-workflows/#related-documentation","title":"Related Documentation","text":"<ul> <li>CI/CD Guide - Complete CI/CD integration</li> <li>Container Usage - Docker and Kubernetes</li> <li>Profiles Guide - Profile configuration</li> </ul>"},{"location":"tutorials/create-your-first-profile/","title":"Create Your First Profile","text":"<p>This tutorial walks you through creating your first sbsh profile step by step.</p>"},{"location":"tutorials/create-your-first-profile/#prerequisites","title":"Prerequisites","text":"<ul> <li>sbsh installed (see Installation)</li> <li>Basic understanding of YAML syntax</li> </ul>"},{"location":"tutorials/create-your-first-profile/#step-1-create-profiles-directory","title":"Step 1: Create Profiles Directory","text":"<p>Create the profiles directory if it doesn't exist:</p> <pre><code>mkdir -p ~/.sbsh\n</code></pre>"},{"location":"tutorials/create-your-first-profile/#step-2-create-a-minimal-profile","title":"Step 2: Create a Minimal Profile","text":"<p>Create your first profile in <code>~/.sbsh/profiles.yaml</code>:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: my-first-profile\nspec:\n  runTarget: local\n  restartPolicy: exit\n  shell:\n    cmd: /bin/bash\n</code></pre> <p>This is the simplest profile possible. It will:</p> <ul> <li>Start a bash terminal</li> <li>Use default settings</li> <li>Exit when the terminal exits</li> </ul>"},{"location":"tutorials/create-your-first-profile/#step-3-test-your-profile","title":"Step 3: Test Your Profile","text":"<p>Start a terminal with your profile:</p> <pre><code>sbsh -p my-first-profile\n</code></pre> <p>You should see a terminal prompt. Type <code>exit</code> to close it.</p>"},{"location":"tutorials/create-your-first-profile/#step-4-add-environment-variables","title":"Step 4: Add Environment Variables","text":"<p>Enhance your profile with environment variables:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: my-first-profile\nspec:\n  runTarget: local\n  restartPolicy: exit\n  shell:\n    cmd: /bin/bash\n    env:\n      MY_VAR: \"hello world\"\n      PROJECT_DIR: \"$HOME/projects\"\n</code></pre>"},{"location":"tutorials/create-your-first-profile/#step-5-set-working-directory","title":"Step 5: Set Working Directory","text":"<p>Add a working directory:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: my-first-profile\nspec:\n  runTarget: local\n  restartPolicy: exit\n  shell:\n    cwd: \"~\"\n    cmd: /bin/bash\n    env:\n      MY_VAR: \"hello world\"\n</code></pre>"},{"location":"tutorials/create-your-first-profile/#step-6-add-lifecycle-hooks","title":"Step 6: Add Lifecycle Hooks","text":"<p>Add initialization commands:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: my-first-profile\nspec:\n  runTarget: local\n  restartPolicy: exit\n  shell:\n    cwd: \"~\"\n    cmd: /bin/bash\n    env:\n      MY_VAR: \"hello world\"\n  stages:\n    onInit:\n      - script: echo \"Terminal starting...\"\n    postAttach:\n      - script: echo \"Welcome back!\"\n</code></pre>"},{"location":"tutorials/create-your-first-profile/#step-7-customize-the-prompt","title":"Step 7: Customize the Prompt","text":"<p>Add a custom prompt to identify your profile:</p> <pre><code>apiVersion: sbsh/v1beta1\nkind: TerminalProfile\nmetadata:\n  name: my-first-profile\nspec:\n  runTarget: local\n  restartPolicy: exit\n  shell:\n    cwd: \"~\"\n    cmd: /bin/bash\n    env:\n      MY_VAR: \"hello world\"\n    prompt: '\"\\[\\e[1;34m\\]my-profile \\[\\e[0m\\]\\u@\\h:\\w\\$ \"'\n  stages:\n    onInit:\n      - script: echo \"Terminal starting...\"\n    postAttach:\n      - script: echo \"Welcome back!\"\n</code></pre>"},{"location":"tutorials/create-your-first-profile/#step-8-verify-your-profile","title":"Step 8: Verify Your Profile","text":"<p>List your profiles to verify:</p> <pre><code>sb get profiles\n</code></pre> <p>You should see <code>my-first-profile</code> in the list.</p>"},{"location":"tutorials/create-your-first-profile/#next-steps","title":"Next Steps","text":"<ul> <li>Profiles Guide - Complete profile reference</li> <li>Share a Terminal - Share terminals with your team</li> <li>Environment Isolation - Control environment inheritance</li> </ul>"},{"location":"tutorials/share-a-terminal/","title":"Share a Terminal","text":"<p>This tutorial shows you how to share terminals with your team for collaborative debugging and pair programming.</p>"},{"location":"tutorials/share-a-terminal/#prerequisites","title":"Prerequisites","text":"<ul> <li>sbsh installed</li> <li>Access to shared filesystem (for cross-machine sharing)</li> </ul>"},{"location":"tutorials/share-a-terminal/#step-1-start-a-named-terminal","title":"Step 1: Start a Named Terminal","text":"<p>Start a terminal with a descriptive name:</p> <pre><code>sbsh -p my-profile --terminal-name shared-debug\n</code></pre> <p>Or use the short form:</p> <pre><code>sbsh -p my-profile --name shared-debug\n</code></pre> <p>The terminal is now running and can be discovered by name.</p>"},{"location":"tutorials/share-a-terminal/#step-2-list-terminals","title":"Step 2: List Terminals","text":"<p>From another session (or machine), list available terminals:</p> <pre><code>sb get terminals\n</code></pre> <p>You should see your <code>shared-debug</code> terminal in the list.</p>"},{"location":"tutorials/share-a-terminal/#step-3-attach-from-another-session","title":"Step 3: Attach from Another Session","text":"<p>Another team member can attach to the same terminal:</p> <pre><code>sb attach shared-debug\n</code></pre> <p>Both users now see the same terminal output and can send input.</p>"},{"location":"tutorials/share-a-terminal/#step-4-multi-attach-demonstration","title":"Step 4: Multi-Attach Demonstration","text":"<p>Have multiple team members attach:</p> <pre><code># Team member 1\nsb attach shared-debug\n\n# Team member 2 (from different machine)\nsb attach shared-debug\n\n# Team member 3\nsb attach shared-debug\n</code></pre> <p>All three see the same output in real-time.</p>"},{"location":"tutorials/share-a-terminal/#step-5-detach-and-reattach","title":"Step 5: Detach and Reattach","text":"<p>Detach from the terminal (press <code>Ctrl-]</code> twice or run <code>sb detach</code>):</p> <pre><code>sb detach\n</code></pre> <p>The terminal continues running. Reattach anytime:</p> <pre><code>sb attach shared-debug\n</code></pre>"},{"location":"tutorials/share-a-terminal/#cross-machine-sharing","title":"Cross-Machine Sharing","text":"<p>For sharing across machines, ensure all machines have access to the same <code>~/.sbsh</code> directory:</p>"},{"location":"tutorials/share-a-terminal/#option-1-shared-network-filesystem","title":"Option 1: Shared Network Filesystem","text":"<p>Mount a shared directory:</p> <pre><code># Machine 1\nexport SBSH_RUN_PATH=/shared/sbsh\nsbsh -p my-profile --name shared-terminal\n\n# Machine 2 (with same mount)\nexport SBSH_RUN_PATH=/shared/sbsh\nsb attach shared-terminal\n</code></pre>"},{"location":"tutorials/share-a-terminal/#option-2-ssh-with-shared-home","title":"Option 2: SSH with Shared Home","text":"<p>If machines share the same home directory (e.g., via NFS):</p> <pre><code># Machine 1\nsbsh -p my-profile --name shared-terminal\n\n# Machine 2 (same user, shared home)\nsb attach shared-terminal\n</code></pre>"},{"location":"tutorials/share-a-terminal/#use-cases","title":"Use Cases","text":""},{"location":"tutorials/share-a-terminal/#pair-programming","title":"Pair Programming","text":"<p>Two developers can work together:</p> <pre><code># Developer 1 starts terminal\nsbsh -p dev-env --name pair-programming\n\n# Developer 2 attaches\nsb attach pair-programming\n</code></pre>"},{"location":"tutorials/share-a-terminal/#collaborative-debugging","title":"Collaborative Debugging","text":"<p>Multiple team members debug together:</p> <pre><code># SRE starts debugging terminal\nsbsh -p production --name prod-debug\n\n# Developers attach\nsb attach prod-debug\n</code></pre>"},{"location":"tutorials/share-a-terminal/#shared-infrastructure-terminals","title":"Shared Infrastructure Terminals","text":"<p>Team members access shared maintenance terminals:</p> <pre><code># Start shared terminal\nsbsh -p k8s-maintenance --name k8s-shared\n\n# Team members attach as needed\nsb attach k8s-shared\n</code></pre>"},{"location":"tutorials/share-a-terminal/#best-practices","title":"Best Practices","text":"<ol> <li>Use descriptive names: <code>shared-debug</code> is better than <code>term1</code></li> <li>Document shared terminals: Let your team know which terminals are shared</li> <li>Coordinate input: When multiple people are attached, coordinate who sends input</li> <li>Clean up: Prune old shared terminals regularly</li> </ol>"},{"location":"tutorials/share-a-terminal/#related-concepts","title":"Related Concepts","text":"<ul> <li>Multi-Attach - How multi-attach works</li> <li>Terminals - Terminal lifecycle</li> <li>Supervisor - Supervisor architecture</li> </ul>"}]}